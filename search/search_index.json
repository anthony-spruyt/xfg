{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"xfg","text":"<p>A CLI tool that syncs JSON, JSON5, YAML, or text configuration files across multiple GitHub, Azure DevOps, and GitLab repositories. By default, changes are made via pull requests (or merge requests for GitLab), but you can also push directly to the default branch.</p> <p>Output format is detected from the target filename extension. JSON and YAML files support deep merging and content inheritance, while plain text files support line-based merging.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install\nnpm install -g @aspruyt/xfg\n\n# Authenticate (GitHub)\ngh auth login\n\n# Create config.yaml\ncat &gt; config.yaml &lt;&lt; 'EOF'\nfiles:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n      tabWidth: 2\n      trailingComma: es5\n\nrepos:\n  # Multiple repos can share the same config\n  - git:\n      - git@github.com:your-org/frontend-app.git\n      - git@github.com:your-org/backend-api.git\n      - git@github.com:your-org/shared-lib.git\nEOF\n\n# Run\nxfg --config ./config.yaml\n</code></pre> <p>Result: PRs are created in all three repos with identical <code>.prettierrc.json</code> files.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Multi-File Sync - Sync multiple config files in a single run</li> <li>Multi-Format Output - JSON, YAML, or plain text based on filename extension</li> <li>Subdirectory Support - Sync files to any path (e.g., <code>.github/workflows/ci.yaml</code>)</li> <li>Text Files - Sync <code>.gitignore</code>, <code>.markdownlintignore</code>, etc. with string or lines array</li> <li>File References - Use <code>@path/to/file</code> to load content from external template files</li> <li>Content Inheritance - Define base config once, override per-repo as needed</li> <li>Multi-Repo Targeting - Apply same config to multiple repos with array syntax</li> <li>Environment Variables - Use <code>${VAR}</code> syntax for dynamic values</li> <li>Merge Strategies - Control how arrays merge (replace, append, prepend)</li> <li>Override Mode - Skip merging entirely for specific repos</li> <li>Empty Files - Create files with no content (e.g., <code>.prettierignore</code>)</li> <li>YAML Comments - Add header comments and schema directives to YAML files</li> <li>Multi-Platform - Works with GitHub, Azure DevOps, and GitLab (including self-hosted)</li> <li>Auto-Merge PRs - Automatically merge PRs when checks pass, or force merge with admin privileges</li> <li>Direct Push Mode - Push directly to default branch without creating PRs</li> <li>Dry-Run Mode - Preview changes without creating PRs</li> <li>Error Resilience - Continues processing if individual repos fail</li> <li>Automatic Retries - Retries transient network errors with exponential backoff</li> </ul> <p>See Use Cases for real-world scenarios: platform engineering, CI/CD standardization, security governance, and more.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<pre><code>flowchart TB\n    subgraph Input\n        YAML[/\"YAML Config File&lt;br/&gt;files{} + repos[]\"/]\n    end\n\n    subgraph Normalization\n        EXPAND[Expand git arrays] --&gt; MERGE[Merge base + overlay content&lt;br/&gt;for each file]\n        MERGE --&gt; ENV[Interpolate env vars]\n    end\n\n    subgraph Processing[\"For Each Repository\"]\n        CLONE[Clone Repo] --&gt; DETECT_BRANCH[Detect Default Branch]\n        DETECT_BRANCH --&gt; MODE_CHECK{Direct Mode?}\n        MODE_CHECK --&gt;|No| CLOSE_PR[Close Existing PR&lt;br/&gt;if exists]\n        CLOSE_PR --&gt; BRANCH[Create Fresh Branch]\n        MODE_CHECK --&gt;|Yes| STAY[Stay on Default Branch]\n        BRANCH --&gt; WRITE[Write Config Files]\n        STAY --&gt; WRITE\n        WRITE --&gt; CHECK{Changes?}\n        CHECK --&gt;|No| SKIP[Skip - No Changes]\n        CHECK --&gt;|Yes| COMMIT[Commit &amp; Push]\n    end\n\n    subgraph Platform[\"PR/Direct Push\"]\n        COMMIT --&gt; DIRECT_CHECK{Direct Mode?}\n        DIRECT_CHECK --&gt;|Yes| DIRECT_PUSH[Push to Default Branch]\n        DIRECT_CHECK --&gt;|No| PR_DETECT{Platform?}\n        PR_DETECT --&gt;|GitHub| GH_PR[Create PR via gh CLI]\n        PR_DETECT --&gt;|Azure DevOps| AZ_PR[Create PR via az CLI]\n        PR_DETECT --&gt;|GitLab| GL_PR[Create MR via glab CLI]\n        GH_PR --&gt; PR_CREATED[PR/MR Created]\n        AZ_PR --&gt; PR_CREATED\n        GL_PR --&gt; PR_CREATED\n        DIRECT_PUSH --&gt; DONE[Done]\n    end\n\n    subgraph AutoMerge[\"Auto-Merge (default)\"]\n        PR_CREATED --&gt; MERGE_MODE{Merge Mode?}\n        MERGE_MODE --&gt;|manual| OPEN[Leave PR Open]\n        MERGE_MODE --&gt;|auto| AUTO[Enable Auto-Merge]\n        MERGE_MODE --&gt;|force| FORCE[Bypass &amp; Merge]\n    end\n\n    YAML --&gt; EXPAND\n    ENV --&gt; CLONE</code></pre> <p>For each repository in the config, the tool:</p> <ol> <li>Expands git URL arrays into individual entries</li> <li>For each file, merges base content with per-repo overlay</li> <li>Interpolates environment variables</li> <li>Cleans the temporary workspace</li> <li>Clones the repository</li> <li>Detects the default branch (main/master)</li> <li>PR modes: Closes any existing PR on the branch and creates a fresh branch | Direct mode: Stays on default branch</li> <li>Writes all config files (JSON, JSON5, YAML, or text based on filename extension)</li> <li>Checks for changes (skips if no changes)</li> <li>Commits and pushes changes</li> <li>PR modes: Creates a pull request and handles auto-merge | Direct mode: Done (changes are on default branch)</li> </ol>"},{"location":"ide-integration/","title":"IDE Integration","text":""},{"location":"ide-integration/#vs-code-yaml-schema-support","title":"VS Code YAML Schema Support","text":"<p>For autocomplete and validation in VS Code, install the YAML extension and add a schema reference to your config file.</p>"},{"location":"ide-integration/#option-1-inline-comment","title":"Option 1: Inline comment","text":"<pre><code># yaml-language-server: $schema=https://raw.githubusercontent.com/anthony-spruyt/xfg/main/config-schema.json\nfiles:\n  my.config.json:\n    content:\n      key: value\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"ide-integration/#option-2-vs-code-settings","title":"Option 2: VS Code settings","text":"<p>Add to <code>.vscode/settings.json</code>:</p> <pre><code>{\n  \"yaml.schemas\": {\n    \"https://raw.githubusercontent.com/anthony-spruyt/xfg/main/config-schema.json\": [\n      \"**/sync-config.yaml\",\n      \"**/config-sync.yaml\"\n    ]\n  }\n}\n</code></pre>"},{"location":"ide-integration/#what-you-get","title":"What You Get","text":"<p>This enables:</p> <ul> <li>Autocomplete for <code>files</code>, <code>repos</code>, <code>content</code>, <code>mergeStrategy</code>, <code>git</code>, <code>override</code></li> <li>Enum suggestions for <code>mergeStrategy</code> values (<code>replace</code>, <code>append</code>, <code>prepend</code>)</li> <li>Validation of required fields</li> <li>Hover documentation for each field</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":""},{"location":"troubleshooting/#authentication-errors","title":"Authentication Errors","text":""},{"location":"troubleshooting/#github","title":"GitHub","text":"<pre><code># Check authentication status\ngh auth status\n\n# Re-authenticate if needed\ngh auth login\n</code></pre>"},{"location":"troubleshooting/#azure-devops","title":"Azure DevOps","text":"<pre><code># Check authentication status\naz account show\n\n# Re-authenticate if needed\naz login\naz devops configure --defaults organization=https://dev.azure.com/YOUR_ORG\n</code></pre>"},{"location":"troubleshooting/#gitlab","title":"GitLab","text":"<pre><code># Check authentication status\nglab auth status\n\n# Re-authenticate if needed\nglab auth login\n\n# For self-hosted instances\nglab auth login --hostname gitlab.example.com\n</code></pre>"},{"location":"troubleshooting/#permission-denied","title":"Permission Denied","text":"<ul> <li>Ensure your token has write access to the target repositories</li> <li>For GitHub, the token needs <code>repo</code> scope</li> <li>For Azure DevOps, ensure the user/service account has \"Contribute to pull requests\" permission</li> <li>For GitLab, ensure the user has at least \"Developer\" role on the project</li> </ul>"},{"location":"troubleshooting/#branch-already-exists","title":"Branch Already Exists","text":"<p>The tool uses a fresh-start approach: it closes any existing PR on the branch and deletes the branch before creating a new one. This ensures each sync attempt is isolated and avoids merge conflicts from stale branches.</p> <p>If you see issues with stale branches:</p> <pre><code># Manually delete the remote branch if needed\ngit push origin --delete chore/sync-config\n</code></pre>"},{"location":"troubleshooting/#missing-environment-variables","title":"Missing Environment Variables","text":"<p>If you see \"Missing required environment variable\" errors:</p> <pre><code># Set the variable before running\nexport MY_VAR=value\nxfg --config ./config.yaml\n\n# Or use default values in config\n# ${MY_VAR:-default-value}\n</code></pre>"},{"location":"troubleshooting/#networkproxy-issues","title":"Network/Proxy Issues","text":"<p>If cloning fails behind a corporate proxy:</p> <pre><code># Configure git proxy\ngit config --global http.proxy http://proxy.example.com:8080\ngit config --global https.proxy http://proxy.example.com:8080\n</code></pre>"},{"location":"troubleshooting/#transient-network-errors","title":"Transient Network Errors","text":"<p>The tool automatically retries transient errors (timeouts, connection resets, rate limits) with exponential backoff. By default, it retries 3 times before failing.</p> <pre><code># Increase retries for unreliable networks\nxfg --config ./config.yaml --retries 5\n\n# Disable retries\nxfg --config ./config.yaml --retries 0\n</code></pre> <p>Permanent errors (authentication failures, permission denied, repository not found) are not retried.</p>"},{"location":"use-cases/","title":"Use Cases","text":"<p>xfg solves the challenge of keeping configuration files consistent across many Git repositories. Here are common scenarios where it helps.</p>"},{"location":"use-cases/#platform-engineering-teams","title":"Platform Engineering Teams","text":"<p>Problem: You have dozens or hundreds of microservices, each in its own repository. Keeping tooling configs consistent is a nightmare of manual PRs or copy-paste drift.</p> <p>Solution: Define your organization's standard configs once and sync them everywhere:</p> <pre><code>files:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n      printWidth: 100\n\n  tsconfig.json:\n    content:\n      compilerOptions:\n        target: ES2022\n        module: NodeNext\n        strict: true\n\n  .eslintrc.json:\n    content:\n      extends: [\"@your-org/eslint-config\"]\n\nrepos:\n  - git:\n      - git@github.com:your-org/service-auth.git\n      - git@github.com:your-org/service-payments.git\n      - git@github.com:your-org/service-notifications.git\n      # ... hundreds more\n</code></pre> <p>Run <code>xfg</code> whenever standards change\u2014PRs are created automatically for review.</p>"},{"location":"use-cases/#cicd-workflow-standardization","title":"CI/CD Workflow Standardization","text":"<p>Problem: Your GitHub Actions workflows have diverged across repos. Some have outdated Node versions, others are missing security scans, and updating them all manually would take days.</p> <p>Solution: Sync workflow files to subdirectories:</p> <pre><code>files:\n  \".github/workflows/ci.yaml\":\n    content:\n      name: CI\n      on: [push, pull_request]\n      jobs:\n        build:\n          runs-on: ubuntu-latest\n          steps:\n            - uses: actions/checkout@v4\n            - uses: actions/setup-node@v4\n              with:\n                node-version: \"24\"\n            - run: npm ci\n            - run: npm test\n\n  \".github/dependabot.yml\":\n    content:\n      version: 2\n      updates:\n        - package-ecosystem: npm\n          directory: \"/\"\n          schedule:\n            interval: weekly\n\nrepos:\n  - git:\n      - git@github.com:your-org/frontend.git\n      - git@github.com:your-org/backend.git\n      - git@github.com:your-org/shared-libs.git\n</code></pre>"},{"location":"use-cases/#security-compliance-governance","title":"Security &amp; Compliance Governance","text":"<p>Problem: Your security team needs to roll out CodeQL scanning and Dependabot configs to all repositories. Manual enforcement doesn't scale.</p> <p>Solution: Define security configs centrally and push to all repos:</p> <pre><code>files:\n  \".github/dependabot.yml\":\n    content:\n      version: 2\n      updates:\n        - package-ecosystem: npm\n          directory: \"/\"\n          schedule:\n            interval: daily\n          open-pull-requests-limit: 10\n\n  \".github/workflows/codeql.yml\":\n    content: \"@templates/codeql-workflow.yml\"\n\n  \".github/SECURITY.md\":\n    content: \"@templates/SECURITY.md\"\n\nrepos:\n  - git:\n      - git@github.com:your-org/public-api.git\n      - git@github.com:your-org/customer-portal.git\n    prOptions:\n      merge: auto # Auto-merge when checks pass\n</code></pre> <p>Use file references to load complex templates from external files.</p>"},{"location":"use-cases/#developer-experience-consistency","title":"Developer Experience Consistency","text":"<p>Problem: Every repository has slightly different formatter settings, editor configs, and tooling. Developers waste time adjusting to each repo's quirks.</p> <p>Solution: Standardize the developer experience:</p> <pre><code>files:\n  .editorconfig:\n    content:\n      - \"root = true\"\n      - \"\"\n      - \"[*]\"\n      - \"indent_style = space\"\n      - \"indent_size = 2\"\n      - \"end_of_line = lf\"\n      - \"charset = utf-8\"\n      - \"trim_trailing_whitespace = true\"\n      - \"insert_final_newline = true\"\n\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n      tabWidth: 2\n      trailingComma: es5\n\n  .prettierignore:\n    content:\n      - \"dist/\"\n      - \"node_modules/\"\n      - \"coverage/\"\n\n  .nvmrc:\n    content: \"20\"\n\nrepos:\n  - git:\n      - git@github.com:your-org/repo-1.git\n      - git@github.com:your-org/repo-2.git\n</code></pre> <p>New team members get the same experience in every repo from day one.</p>"},{"location":"use-cases/#open-source-project-maintainers","title":"Open Source Project Maintainers","text":"<p>Problem: You maintain multiple related open source projects. Keeping issue templates, contributing guidelines, and CI workflows consistent is tedious.</p> <p>Solution: Manage your project ecosystem from one config:</p> <pre><code>files:\n  \".github/ISSUE_TEMPLATE/bug_report.md\":\n    content: \"@templates/bug-report.md\"\n\n  \".github/ISSUE_TEMPLATE/feature_request.md\":\n    content: \"@templates/feature-request.md\"\n\n  \".github/CONTRIBUTING.md\":\n    content: \"@templates/CONTRIBUTING.md\"\n\n  \".github/workflows/ci.yaml\":\n    content: \"@templates/oss-ci.yaml\"\n\n  LICENSE:\n    content: \"@templates/MIT-LICENSE\"\n\nrepos:\n  - git:\n      - git@github.com:your-name/project-core.git\n      - git@github.com:your-name/project-cli.git\n      - git@github.com:your-name/project-plugins.git\n</code></pre>"},{"location":"use-cases/#configuration-drift-prevention","title":"Configuration Drift Prevention","text":"<p>Problem: Configurations drift over time as individual repos make local changes. You need to detect and fix drift automatically.</p> <p>Solution: Run xfg on a schedule in CI:</p> <pre><code># .github/workflows/sync-configs.yaml\nname: Sync Configs\non:\n  schedule:\n    - cron: \"0 9 * * 1\" # Every Monday at 9am\n  workflow_dispatch:\n\njobs:\n  sync:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \"24\"\n      - run: npm install -g @aspruyt/xfg\n      - run: xfg --config ./config.yaml\n        env:\n          GH_TOKEN: ${{ secrets.SYNC_TOKEN }}\n</code></pre> <p>Drift is detected weekly, and PRs are created to bring repos back into compliance.</p>"},{"location":"use-cases/#migrating-to-new-standards","title":"Migrating to New Standards","text":"<p>Problem: You're adopting a new tool (like switching from ESLint to Biome, or adding Renovate) and need to roll it out across many repos.</p> <p>Solution: Use <code>createOnly</code> for new files that shouldn't overwrite existing ones:</p> <pre><code>files:\n  renovate.json:\n    createOnly: true # Only create if doesn't exist\n    content:\n      \"$schema\": \"https://docs.renovatebot.com/renovate-schema.json\"\n      extends:\n        - \"config:recommended\"\n        - \":preserveSemverRanges\"\n\n  biome.json:\n    content:\n      \"$schema\": \"https://biomejs.dev/schemas/1.9.4/schema.json\"\n      organizeImports:\n        enabled: true\n      linter:\n        enabled: true\n\nrepos:\n  - git:\n      - git@github.com:your-org/repo-1.git\n      - git@github.com:your-org/repo-2.git\n</code></pre>"},{"location":"use-cases/#hybrid-teams-multi-platform","title":"Hybrid Teams (Multi-Platform)","text":"<p>Problem: Your organization uses GitHub for open source, Azure DevOps for enterprise apps, and GitLab for internal tools. You need consistency across all platforms.</p> <p>Solution: xfg works with all three platforms in the same config:</p> <pre><code>files:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n\nrepos:\n  # GitHub repos\n  - git: git@github.com:your-org/oss-project.git\n\n  # Azure DevOps repos\n  - git: git@ssh.dev.azure.com:v3/your-org/project/enterprise-app\n\n  # GitLab repos (including self-hosted)\n  - git: git@gitlab.example.com:your-org/internal-tool.git\n</code></pre>"},{"location":"use-cases/#why-xfg-vs-alternatives","title":"Why xfg vs. Alternatives","text":"Approach Drawback xfg Advantage Manual PRs Doesn't scale past 10 repos Automates PR creation Monorepo Major migration, not always feasible Works with existing multi-repo setup Git submodules Complex, poor DX Simple YAML config Copy-paste Leads to drift Enforces single source of truth GitHub Actions sync GitHub-only Works with GitHub, Azure DevOps, GitLab"},{"location":"ci-cd/","title":"CI/CD Integration","text":"<p>Run xfg automatically when your config file changes.</p>"},{"location":"ci-cd/#supported-ci-systems","title":"Supported CI Systems","text":"<ul> <li>GitHub Actions</li> <li>Azure Pipelines</li> </ul>"},{"location":"ci-cd/#general-pattern","title":"General Pattern","text":"<ol> <li>Trigger on changes to your config file</li> <li>Install Node.js and xfg</li> <li>Authenticate with the target platform</li> <li>Run xfg</li> </ol>"},{"location":"ci-cd/#environment-variables","title":"Environment Variables","text":"<p>For CI/CD, you'll typically need:</p> Platform Token Variable Notes GitHub <code>GH_TOKEN</code> or <code>GITHUB_TOKEN</code> PAT with <code>repo</code> scope Azure DevOps <code>AZURE_DEVOPS_EXT_PAT</code> Or use <code>$(System.AccessToken)</code> GitLab <code>GITLAB_TOKEN</code> PAT with API access"},{"location":"ci-cd/azure-pipelines/","title":"Azure Pipelines","text":""},{"location":"ci-cd/azure-pipelines/#pipeline-example","title":"Pipeline Example","text":"<pre><code>trigger:\n  branches:\n    include: [main]\n  paths:\n    include: [\"config.yaml\"]\n\npool:\n  vmImage: \"ubuntu-latest\"\n\nsteps:\n  - task: NodeTool@0\n    inputs:\n      versionSpec: \"20.x\"\n  - script: npm install -g @aspruyt/xfg\n    displayName: \"Install xfg\"\n  - script: xfg --config ./config.yaml\n    displayName: \"Sync configs\"\n    env:\n      AZURE_DEVOPS_EXT_PAT: $(System.AccessToken)\n</code></pre>"},{"location":"ci-cd/azure-pipelines/#token-requirements","title":"Token Requirements","text":"<p>Build Service Permissions</p> <p>Ensure the build service account has permission to create PRs in target repositories.</p>"},{"location":"ci-cd/azure-pipelines/#using-systemaccesstoken","title":"Using System.AccessToken","text":"<p>The <code>$(System.AccessToken)</code> provides access within the same Azure DevOps organization. For cross-organization access, use a PAT:</p> <pre><code>- script: xfg --config ./config.yaml\n  displayName: \"Sync configs\"\n  env:\n    AZURE_DEVOPS_EXT_PAT: $(MY_PAT)\n</code></pre> <p>Where <code>MY_PAT</code> is a pipeline variable containing your Personal Access Token.</p>"},{"location":"ci-cd/azure-pipelines/#multiple-config-files","title":"Multiple Config Files","text":"<pre><code>trigger:\n  branches:\n    include: [main]\n  paths:\n    include: [\"configs/*\"]\n\npool:\n  vmImage: \"ubuntu-latest\"\n\nstrategy:\n  matrix:\n    eslint:\n      configFile: \"eslint-config.yaml\"\n    prettier:\n      configFile: \"prettier-config.yaml\"\n\nsteps:\n  - task: NodeTool@0\n    inputs:\n      versionSpec: \"20.x\"\n  - script: npm install -g @aspruyt/xfg\n    displayName: \"Install xfg\"\n  - script: xfg --config ./configs/$(configFile)\n    displayName: \"Sync $(configFile)\"\n    env:\n      AZURE_DEVOPS_EXT_PAT: $(System.AccessToken)\n</code></pre>"},{"location":"ci-cd/github-actions/","title":"GitHub Actions","text":""},{"location":"ci-cd/github-actions/#using-the-github-action","title":"Using the GitHub Action","text":"<p>The simplest way to use xfg in GitHub Actions is with the official action:</p> <pre><code>- uses: actions/checkout@v4\n\n- uses: anthony-spruyt/xfg@v1\n  with:\n    config: ./sync-config.yml\n    github-token: ${{ secrets.GH_PAT }} # PAT with repo scope for cross-repo access\n</code></pre>"},{"location":"ci-cd/github-actions/#action-inputs","title":"Action Inputs","text":"Input Required Default Description <code>config</code> Yes - Path to YAML config file <code>dry-run</code> No <code>false</code> Preview mode - show what would change without creating PRs <code>work-dir</code> No <code>./tmp</code> Directory for cloning repositories <code>retries</code> No <code>3</code> Number of network retries <code>branch</code> No - Override sync branch name <code>merge</code> No - PR merge mode (<code>manual</code>/<code>auto</code>/<code>force</code>/<code>direct</code>) <code>merge-strategy</code> No - Merge strategy (<code>merge</code>/<code>squash</code>/<code>rebase</code>) <code>delete-branch</code> No <code>false</code> Delete branch after merge <code>github-token</code> No <code>${{ github.token }}</code> GitHub token for authentication <code>azure-devops-token</code> No - Azure DevOps Personal Access Token <code>gitlab-token</code> No - GitLab token for authentication"},{"location":"ci-cd/github-actions/#multi-platform-example","title":"Multi-Platform Example","text":"<p>Sync configs across GitHub, Azure DevOps, and GitLab repositories:</p> <pre><code>- uses: anthony-spruyt/xfg@v1\n  with:\n    config: ./sync-config.yml\n    github-token: ${{ secrets.GH_PAT }}\n    azure-devops-token: ${{ secrets.AZURE_DEVOPS_PAT }}\n    gitlab-token: ${{ secrets.GITLAB_TOKEN }}\n    merge: auto\n    merge-strategy: squash\n    delete-branch: true\n</code></pre>"},{"location":"ci-cd/github-actions/#auto-merge-example","title":"Auto-Merge Example","text":"<p>Automatically merge PRs when CI passes:</p> <pre><code>- uses: anthony-spruyt/xfg@v1\n  with:\n    config: ./sync-config.yml\n    github-token: ${{ secrets.GH_PAT }}\n    merge: auto\n</code></pre>"},{"location":"ci-cd/github-actions/#direct-push-example","title":"Direct Push Example","text":"<p>Push directly to the default branch without creating PRs:</p> <pre><code>- uses: anthony-spruyt/xfg@v1\n  with:\n    config: ./sync-config.yml\n    github-token: ${{ secrets.GH_PAT }}\n    merge: direct\n</code></pre>"},{"location":"ci-cd/github-actions/#token-requirements-by-platform","title":"Token Requirements by Platform","text":"<p>GitHub:</p> <ul> <li>Requires a Personal Access Token (PAT) with <code>repo</code> scope</li> <li>The default <code>${{ github.token }}</code> only has access to the current repository</li> <li>For cross-repo syncing, create a PAT and store it as a secret</li> </ul> <p>Azure DevOps:</p> <ul> <li>Requires a Personal Access Token with <code>Code (Read &amp; Write)</code> and <code>Pull Request Threads (Read &amp; Write)</code> permissions</li> <li>Must also have access to the target project</li> </ul> <p>GitLab:</p> <ul> <li>Requires a Personal Access Token with <code>api</code> scope</li> <li>Or a Project Access Token with <code>api</code> scope for single-project access</li> </ul>"},{"location":"ci-cd/github-actions/#workflow-example","title":"Workflow Example","text":"<p>If you prefer manual setup over the action, you can install and run xfg directly:</p> <pre><code>name: Sync Configs\non:\n  push:\n    branches: [main]\n    paths: [\"config.yaml\"]\n\njobs:\n  sync:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \"24\"\n      - run: npm install -g @aspruyt/xfg\n      - run: xfg --config ./config.yaml\n        env:\n          GH_TOKEN: ${{ secrets.GH_PAT }}\n</code></pre>"},{"location":"ci-cd/github-actions/#token-requirements","title":"Token Requirements","text":"<p>Personal Access Token Required</p> <p><code>GH_PAT</code> must be a Personal Access Token with <code>repo</code> scope to create PRs in target repositories. The default <code>GITHUB_TOKEN</code> only has access to the current repository.</p>"},{"location":"ci-cd/github-actions/#creating-a-pat","title":"Creating a PAT","text":"<ol> <li>Go to Settings &gt; Developer settings &gt; Personal access tokens &gt; Tokens (classic)</li> <li>Click Generate new token (classic)</li> <li>Select the <code>repo</code> scope</li> <li>Copy the token and add it as a repository secret named <code>GH_PAT</code></li> </ol>"},{"location":"ci-cd/github-actions/#multiple-config-files","title":"Multiple Config Files","text":"<pre><code>name: Sync All Configs\non:\n  push:\n    branches: [main]\n    paths:\n      - \"configs/*.yaml\"\n\njobs:\n  sync:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        config:\n          - eslint-config.yaml\n          - prettier-config.yaml\n          - tsconfig-config.yaml\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \"24\"\n      - run: npm install -g @aspruyt/xfg\n      - run: xfg --config ./configs/${{ matrix.config }}\n        env:\n          GH_TOKEN: ${{ secrets.GH_PAT }}\n</code></pre>"},{"location":"ci-cd/github-actions/#dry-run-on-pr","title":"Dry Run on PR","text":"<p>Preview changes without creating PRs:</p> <pre><code>name: Preview Config Changes\non:\n  pull_request:\n    paths: [\"config.yaml\"]\n\njobs:\n  preview:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \"24\"\n      - run: npm install -g @aspruyt/xfg\n      - run: xfg --config ./config.yaml --dry-run\n        env:\n          GH_TOKEN: ${{ secrets.GH_PAT }}\n</code></pre>"},{"location":"configuration/","title":"Configuration Overview","text":"<p>xfg uses a YAML configuration file to define which files to sync and to which repositories.</p>"},{"location":"configuration/#basic-structure","title":"Basic Structure","text":"<pre><code>id: my-config # Unique identifier for this config (required)\nfiles:\n  my.config.json: # Target file (.json outputs JSON, .yaml/.yml outputs YAML)\n    mergeStrategy: replace # Array merge strategy for this file (optional)\n    content: # Base config content\n      key: value\n\nrepos: # List of repositories\n  - git: git@github.com:org/repo.git\n    files: # Per-repo file overrides (optional)\n      my.config.json:\n        content:\n          key: override\n</code></pre>"},{"location":"configuration/#root-level-fields","title":"Root-Level Fields","text":"Field Description Required <code>id</code> Unique identifier for this config. Used to namespace managed files in <code>.xfg.json</code> manifest. Yes <code>files</code> Map of target filenames to configs Yes <code>repos</code> Array of repository configurations Yes <code>prOptions</code> Global PR merge options (can be overridden per-repo) No <code>prTemplate</code> Custom PR body template (inline or <code>@path/to/file</code> reference) No <code>deleteOrphaned</code> Global default for orphan deletion. Files removed from config are deleted from repos. No"},{"location":"configuration/#per-file-fields","title":"Per-File Fields","text":"Field Description Required <code>content</code> Base config: object for JSON/YAML files, string or string[] for text files, or <code>@path/to/file</code> to load from external template (omit for empty file) No <code>mergeStrategy</code> Merge strategy: <code>replace</code>, <code>append</code>, <code>prepend</code> (for arrays and text lines) No <code>createOnly</code> If <code>true</code>, only create file if it doesn't exist No <code>executable</code> Mark file as executable. <code>.sh</code> files are auto-executable unless set to <code>false</code>. Set to <code>true</code> for non-.sh files. No <code>header</code> Comment line(s) at top of YAML files (string or array) No <code>schemaUrl</code> Adds <code># yaml-language-server: $schema=&lt;url&gt;</code> to YAML files No <code>template</code> If <code>true</code>, enable <code>${xfg:...}</code> variable substitution. See Templating. No <code>vars</code> Custom template variables (object with string values). Accessible as <code>${xfg:varName}</code>. No <code>deleteOrphaned</code> If <code>true</code>, track file for orphan deletion. Removing it from config will delete it from repos. No"},{"location":"configuration/#per-repo-fields","title":"Per-Repo Fields","text":"Field Description Required <code>git</code> Git URL (string) or array of URLs Yes <code>files</code> Per-repo file overrides (optional) No <code>prOptions</code> Per-repo PR merge options (overrides global) No"},{"location":"configuration/#per-repo-file-override-fields","title":"Per-Repo File Override Fields","text":"Field Description Required <code>content</code> Content overlay merged onto file's base content No <code>override</code> If <code>true</code>, ignore base content and use only this repo's No <code>createOnly</code> Override root-level <code>createOnly</code> for this repo No <code>executable</code> Override root-level <code>executable</code> for this repo No <code>header</code> Override root-level <code>header</code> for this repo No <code>schemaUrl</code> Override root-level <code>schemaUrl</code> for this repo No <code>template</code> Override root-level <code>template</code> for this repo No <code>vars</code> Per-repo template variables (merged with root vars, overrides conflicts) No <code>deleteOrphaned</code> Override file-level or global <code>deleteOrphaned</code> for this repo No"},{"location":"configuration/#file-exclusion","title":"File Exclusion","text":"<p>Set a file to <code>false</code> to exclude it from a specific repo:</p> <pre><code>repos:\n  - git: git@github.com:org/repo.git\n    files:\n      eslint.json: false # This repo won't receive eslint.json\n</code></pre>"},{"location":"configuration/#delete-orphaned-files","title":"Delete Orphaned Files","text":"<p>Files with <code>deleteOrphaned: true</code> are tracked in a <code>.xfg.json</code> manifest file in each target repository. When a tracked file is removed from your xfg config, it will be automatically deleted from the target repos on the next sync.</p> <pre><code>id: my-org-standards\nfiles:\n  .prettierrc.json:\n    content: { semi: false }\n    deleteOrphaned: true # Track this file - removing it from config deletes it from repos\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"configuration/#inheritance","title":"Inheritance","text":"<p><code>deleteOrphaned</code> follows the standard inheritance pattern:</p> <ol> <li>Global default - Set at root level applies to all files</li> <li>Per-file - Overrides global default for specific files</li> <li>Per-repo - Overrides both global and per-file for specific repos</li> </ol> <pre><code>deleteOrphaned: true # Global: track all files by default\n\nfiles:\n  .prettierrc.json:\n    content: { semi: false }\n  .eslintrc.json:\n    content: { extends: \"standard\" }\n    deleteOrphaned: false # This file won't be tracked\n\nrepos:\n  - git: git@github.com:org/special-repo.git\n    files:\n      .prettierrc.json:\n        deleteOrphaned: false # Don't track for this repo only\n</code></pre>"},{"location":"configuration/#disabling-at-runtime","title":"Disabling at Runtime","text":"<p>Use the <code>--no-delete</code> CLI flag to skip deletion even if configured:</p> <pre><code>xfg --config config.yaml --no-delete\n</code></pre>"},{"location":"configuration/content-types/","title":"Content Types","text":"<p>xfg supports different content types based on the target file extension.</p>"},{"location":"configuration/content-types/#json-files-json","title":"JSON Files (<code>.json</code>)","text":"<p>Object content outputs as JSON with 2-space indentation:</p> <pre><code>files:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n</code></pre> <p>Output:</p> <pre><code>{\n  \"semi\": false,\n  \"singleQuote\": true\n}\n</code></pre>"},{"location":"configuration/content-types/#json5-files-json5","title":"JSON5 Files (<code>.json5</code>)","text":"<p>Object content outputs as JSON5 (supports comments, trailing commas):</p> <pre><code>files:\n  config.json5:\n    content:\n      apiUrl: \"https://api.example.com\"\n      timeout: 5000\n</code></pre>"},{"location":"configuration/content-types/#yaml-files-yaml-yml","title":"YAML Files (<code>.yaml</code>, <code>.yml</code>)","text":"<p>Object content outputs as YAML:</p> <pre><code>files:\n  config.yaml:\n    content:\n      database:\n        host: localhost\n        port: 5432\n</code></pre> <p>Output:</p> <pre><code>database:\n  host: localhost\n  port: 5432\n</code></pre>"},{"location":"configuration/content-types/#yaml-comments","title":"YAML Comments","text":"<p>Add schema directives and header comments to YAML files:</p> <pre><code>files:\n  trivy.yaml:\n    schemaUrl: https://trivy.dev/latest/docs/references/configuration/config-file/\n    header: \"Trivy security scanner configuration\"\n    content:\n      exit-code: 1\n</code></pre> <p>Output:</p> <pre><code># yaml-language-server: $schema=https://trivy.dev/latest/docs/references/configuration/config-file/\n# Trivy security scanner configuration\nexit-code: 1\n</code></pre> <p>Multi-line headers are also supported:</p> <pre><code>files:\n  config.yaml:\n    header:\n      - \"Auto-generated configuration\"\n      - \"Do not edit manually\"\n    content:\n      version: 1\n</code></pre> <p>Note</p> <p><code>header</code> and <code>schemaUrl</code> only apply to YAML output files. They are ignored for JSON files.</p>"},{"location":"configuration/content-types/#text-files","title":"Text Files","text":"<p>Files with extensions other than <code>.json</code>, <code>.json5</code>, <code>.yaml</code>, or <code>.yml</code> are treated as text files. Use string or string array content:</p>"},{"location":"configuration/content-types/#string-content","title":"String Content","text":"<pre><code>files:\n  .markdownlintignore:\n    content: |-\n      # Claude Code generated files\n      .claude/\n</code></pre>"},{"location":"configuration/content-types/#lines-array-content","title":"Lines Array Content","text":"<pre><code>files:\n  .gitignore:\n    content:\n      - \"node_modules/\"\n      - \"dist/\"\n      - \"coverage/\"\n</code></pre> <p>Lines are joined with newlines in the output.</p>"},{"location":"configuration/content-types/#empty-files","title":"Empty Files","text":"<p>Omit <code>content</code> to create an empty file:</p> <pre><code>files:\n  .prettierignore:\n    createOnly: true\n    # No content = empty file\n</code></pre>"},{"location":"configuration/content-types/#validation-rules","title":"Validation Rules","text":"<ul> <li><code>.json</code>, <code>.json5</code>, <code>.yaml</code>, <code>.yml</code> files must have object content</li> <li>Other file extensions must have string or string array content</li> <li>Mixing content types (e.g., object content in a <code>.txt</code> file) causes a validation error</li> </ul>"},{"location":"configuration/env-variables/","title":"Environment Variables","text":"<p>Use <code>${VAR}</code> syntax in string values to inject environment variables at runtime.</p>"},{"location":"configuration/env-variables/#syntax-options","title":"Syntax Options","text":"Syntax Behavior <code>${VAR}</code> Required - errors if not set <code>${VAR:-default}</code> Use default value if variable is not set <code>${VAR:?message}</code> Required with custom error message"},{"location":"configuration/env-variables/#example","title":"Example","text":"<pre><code>files:\n  app.config.json:\n    content:\n      apiUrl: ${API_URL} # Required\n      environment: ${ENV:-development} # With default\n      secretKey: ${SECRET:?Secret required} # Required with message\n\nrepos:\n  - git: git@github.com:org/backend.git\n</code></pre> <p>Then run with environment variables:</p> <pre><code>export API_URL=https://api.example.com\nexport SECRET=my-secret-key\nxfg --config ./config.yaml\n</code></pre>"},{"location":"configuration/env-variables/#escaping-variable-syntax","title":"Escaping Variable Syntax","text":"<p>If your target file needs literal <code>${VAR}</code> syntax (e.g., for devcontainer.json, shell scripts, or other templating systems), use <code>$$</code> to escape:</p> <pre><code>files:\n  .devcontainer/devcontainer.json:\n    content:\n      name: my-dev-container\n      remoteEnv:\n        # Escaped - outputs literal ${localWorkspaceFolder}\n        LOCAL_WORKSPACE_FOLDER: \"$${localWorkspaceFolder}\"\n        CONTAINER_WORKSPACE: \"$${containerWorkspaceFolder}\"\n        # Interpolated - replaced with actual env value\n        API_KEY: \"${API_KEY}\"\n</code></pre> <p>Output:</p> <pre><code>{\n  \"name\": \"my-dev-container\",\n  \"remoteEnv\": {\n    \"LOCAL_WORKSPACE_FOLDER\": \"${localWorkspaceFolder}\",\n    \"CONTAINER_WORKSPACE\": \"${containerWorkspaceFolder}\",\n    \"API_KEY\": \"actual-api-key-value\"\n  }\n}\n</code></pre> <p>This follows the same escape convention used by Docker Compose.</p>"},{"location":"configuration/env-variables/#full-example","title":"Full Example","text":"<pre><code>files:\n  app.config.json:\n    content:\n      database:\n        host: ${DB_HOST:-localhost}\n        port: ${DB_PORT:-5432}\n        password: ${DB_PASSWORD:?Database password required}\n\n      api:\n        baseUrl: ${API_BASE_URL}\n        timeout: 30000\n\nrepos:\n  - git: git@github.com:org/backend.git\n</code></pre>"},{"location":"configuration/file-references/","title":"File References","text":"<p>Instead of inline content, you can reference external template files using the <code>@path/to/file</code> syntax.</p>"},{"location":"configuration/file-references/#syntax","title":"Syntax","text":"<pre><code>files:\n  .prettierrc.json:\n    content: \"@templates/prettierrc.json\"\n  .eslintrc.yaml:\n    content: \"@templates/eslintrc.yaml\"\n  .gitignore:\n    content: \"@templates/gitignore.txt\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"configuration/file-references/#how-it-works","title":"How It Works","text":"<ul> <li>File references start with <code>@</code> followed by a relative path</li> <li>Paths are resolved relative to the config file's directory</li> <li>JSON/JSON5/YAML files are parsed as objects</li> <li>Other files are returned as strings</li> <li>Per-repo overlays still work - they merge onto the resolved file content</li> </ul>"},{"location":"configuration/file-references/#example-directory-structure","title":"Example Directory Structure","text":"<pre><code>config/\n  sync-config.yaml         # content: \"@templates/prettier.json\"\n  templates/\n    prettier.json          # Actual Prettier config\n    eslintrc.yaml          # Actual ESLint config\n    gitignore.txt          # Template .gitignore content\n</code></pre>"},{"location":"configuration/file-references/#metadata-fields-work-normally","title":"Metadata Fields Work Normally","text":"<p>You can still use <code>header</code>, <code>schemaUrl</code>, <code>createOnly</code>, and <code>mergeStrategy</code> alongside file references:</p> <pre><code>files:\n  .eslintrc.yaml:\n    content: \"@templates/eslintrc.yaml\"\n    header: \"Auto-generated - do not edit\"\n    schemaUrl: \"https://json.schemastore.org/eslintrc\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"configuration/file-references/#per-repo-overlays-with-file-references","title":"Per-Repo Overlays with File References","text":"<p>Per-repo content overlays merge onto the resolved file content:</p> <pre><code>files:\n  .eslintrc.json:\n    content: \"@templates/eslintrc.json\" # Base config from file\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    files:\n      .eslintrc.json:\n        content:\n          extends: [\"plugin:react/recommended\"] # Merged with template\n</code></pre>"},{"location":"configuration/file-references/#security","title":"Security","text":"<p>File references are restricted to the config file's directory tree for security:</p> <ul> <li><code>@templates/config.json</code> - Valid</li> <li><code>@../../../etc/passwd</code> - Blocked</li> <li><code>@/etc/passwd</code> - Blocked</li> </ul> <p>Attempts to escape the config directory will result in a validation error.</p>"},{"location":"configuration/inheritance/","title":"Content Inheritance","text":"<p>xfg uses a 3-level inheritance system that lets you define base configurations once and customize them per-repository.</p>"},{"location":"configuration/inheritance/#inheritance-levels","title":"Inheritance Levels","text":""},{"location":"configuration/inheritance/#level-1-global-file-content","title":"Level 1: Global File Content","text":"<p>Define base content at the file level that applies to all repos:</p> <pre><code>files:\n  service.config.json:\n    content:\n      version: \"2.0\"\n      logging:\n        level: info\n        format: json\n      features:\n        - health-check\n        - metrics\n</code></pre>"},{"location":"configuration/inheritance/#level-2-per-repo-overlay","title":"Level 2: Per-Repo Overlay","text":"<p>Add or override specific fields for certain repos:</p> <pre><code>repos:\n  - git: git@github.com:org/api-gateway.git\n    files:\n      service.config.json:\n        content:\n          team: platform # Added to base\n          logging:\n            level: debug # Overrides base\n</code></pre> <p>The result is a deep merge of base + overlay:</p> <pre><code>{\n  \"version\": \"2.0\",\n  \"logging\": {\n    \"level\": \"debug\",\n    \"format\": \"json\"\n  },\n  \"features\": [\"health-check\", \"metrics\"],\n  \"team\": \"platform\"\n}\n</code></pre>"},{"location":"configuration/inheritance/#level-3-per-repo-override","title":"Level 3: Per-Repo Override","text":"<p>Use <code>override: true</code> to completely replace the base content:</p> <pre><code>repos:\n  - git: git@github.com:org/legacy-api.git\n    files:\n      service.config.json:\n        override: true\n        content:\n          version: \"1.0\"\n          legacy: true\n</code></pre> <p>The base content is ignored entirely, only the override content is used.</p>"},{"location":"configuration/inheritance/#how-deep-merge-works","title":"How Deep Merge Works","text":"<ul> <li>Objects: Fields are merged recursively; overlay fields overwrite base fields</li> <li>Arrays: By default, overlay arrays replace base arrays (see Merge Strategies to change this)</li> <li>Scalars: Overlay values replace base values</li> </ul>"},{"location":"configuration/inheritance/#file-exclusion","title":"File Exclusion","text":"<p>Set a file to <code>false</code> to exclude it from a specific repo:</p> <pre><code>files:\n  .eslintrc.json:\n    content:\n      extends: [\"@company/base\"]\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    # Gets .eslintrc.json\n\n  - git: git@github.com:org/legacy-repo.git\n    files:\n      .eslintrc.json: false # Excluded from this repo\n</code></pre>"},{"location":"configuration/inheritance/#example-team-specific-configurations","title":"Example: Team-Specific Configurations","text":"<pre><code>files:\n  service.config.json:\n    content:\n      version: \"2.0\"\n      logging:\n        level: info\n        format: json\n      features:\n        - health-check\n        - metrics\n\nrepos:\n  # Platform team - add extra features\n  - git:\n      - git@github.com:org/api-gateway.git\n      - git@github.com:org/auth-service.git\n    files:\n      service.config.json:\n        content:\n          team: platform\n          features:\n            $arrayMerge: append\n            values:\n              - tracing\n              - rate-limiting\n\n  # Data team - different logging\n  - git:\n      - git@github.com:org/data-pipeline.git\n      - git@github.com:org/analytics.git\n    files:\n      service.config.json:\n        content:\n          team: data\n          logging:\n            level: debug\n\n  # Legacy service - completely different config\n  - git: git@github.com:org/legacy-api.git\n    files:\n      service.config.json:\n        override: true\n        content:\n          version: \"1.0\"\n          legacy: true\n</code></pre>"},{"location":"configuration/merge-strategies/","title":"Merge Strategies","text":"<p>Control how arrays and text lines merge when combining base content with per-repo overlays.</p>"},{"location":"configuration/merge-strategies/#strategies","title":"Strategies","text":"Strategy Behavior <code>replace</code> Overlay completely replaces base <code>append</code> Overlay items added after base items <code>prepend</code> Overlay items added before base items"},{"location":"configuration/merge-strategies/#file-level-strategy","title":"File-Level Strategy","text":"<p>Set a default strategy for a file using <code>mergeStrategy</code>:</p> <pre><code>files:\n  .eslintrc.json:\n    mergeStrategy: append # extends arrays will append\n    content:\n      extends: [\"@company/base\"]\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    files:\n      .eslintrc.json:\n        content:\n          extends: [\"plugin:react/recommended\"]\n</code></pre> <p>Result: <code>[\"@company/base\", \"plugin:react/recommended\"]</code></p>"},{"location":"configuration/merge-strategies/#inline-array-merge-directive","title":"Inline Array Merge Directive","text":"<p>For more granular control, use the <code>$arrayMerge</code> directive within the content:</p> <pre><code>files:\n  config.json:\n    content:\n      features:\n        - core\n        - monitoring\n\nrepos:\n  - git: git@github.com:org/repo.git\n    files:\n      config.json:\n        content:\n          features:\n            $arrayMerge: append\n            values:\n              - custom-feature\n</code></pre> <p>Result: <code>[\"core\", \"monitoring\", \"custom-feature\"]</code></p>"},{"location":"configuration/merge-strategies/#text-file-merge-strategies","title":"Text File Merge Strategies","text":"<p>For text files with lines array content, merge strategies work the same way:</p> <pre><code>files:\n  .gitignore:\n    mergeStrategy: append\n    content:\n      - \"node_modules/\"\n      - \"dist/\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n    files:\n      .gitignore:\n        content:\n          - \"coverage/\" # Appended to base\n</code></pre> <p>Result:</p> <pre><code>node_modules/\ndist/\ncoverage/\n</code></pre> <p>Note</p> <p>String content (not lines array) always uses replace strategy - the entire string is replaced.</p>"},{"location":"configuration/merge-strategies/#example-different-strategies-per-file","title":"Example: Different Strategies per File","text":"<pre><code>files:\n  eslint.config.json:\n    mergeStrategy: append # Extends will append\n    content:\n      extends: [\"@company/base\"]\n\n  tsconfig.json:\n    mergeStrategy: replace # Lib will replace entirely\n    content:\n      compilerOptions:\n        lib: [\"ES2022\"]\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    files:\n      eslint.config.json:\n        content:\n          extends: [\"plugin:react/recommended\"]\n      # Results in extends: [\"@company/base\", \"plugin:react/recommended\"]\n\n      tsconfig.json:\n        content:\n          compilerOptions:\n            lib: [\"ES2022\", \"DOM\"]\n      # Results in lib: [\"ES2022\", \"DOM\"] (replaced)\n</code></pre>"},{"location":"configuration/pr-options/","title":"PR Options","text":"<p>Configure how PRs are handled after creation.</p>"},{"location":"configuration/pr-options/#pr-options-fields","title":"PR Options Fields","text":"Field Description Default <code>merge</code> Merge mode: <code>manual</code> (leave open), <code>auto</code> (merge when checks pass), <code>force</code>, <code>direct</code> <code>auto</code> <code>mergeStrategy</code> How to merge: <code>merge</code>, <code>squash</code>, <code>rebase</code> <code>squash</code> <code>deleteBranch</code> Delete source branch after merge <code>true</code> <code>bypassReason</code> Reason for bypassing policies (Azure DevOps only, required for <code>force</code>) -"},{"location":"configuration/pr-options/#merge-modes","title":"Merge Modes","text":"Mode GitHub Behavior Azure DevOps Behavior GitLab Behavior <code>manual</code> Leave PR open for review Leave PR open for review Leave MR open for review <code>auto</code> Enable auto-merge (requires repo setup, default) Enable auto-complete (default) Merge when pipeline succeeds (default) <code>force</code> Merge with <code>--admin</code> (bypass checks) Bypass policies with <code>--bypass-policy</code> Merge immediately <code>direct</code> Push directly to default branch (no PR) Push directly to default branch (no PR) Push directly to default branch (no MR)"},{"location":"configuration/pr-options/#global-vs-per-repo-options","title":"Global vs Per-Repo Options","text":"<p>Set global defaults, then override per-repo as needed:</p> <pre><code>files:\n  .prettierrc.json:\n    content:\n      semi: false\n\nprOptions:\n  merge: auto\n  mergeStrategy: squash\n  deleteBranch: true\n\nrepos:\n  # Uses global defaults\n  - git: git@github.com:org/frontend.git\n\n  # Override to manual\n  - git: git@github.com:org/needs-review.git\n    prOptions:\n      merge: manual\n\n  # Override to force merge\n  - git: git@github.com:org/internal-tool.git\n    prOptions:\n      merge: force\n</code></pre>"},{"location":"configuration/pr-options/#cli-override","title":"CLI Override","text":"<p>CLI flags take highest priority:</p> <pre><code># Disable auto-merge, leave PRs open for review\nxfg --config ./config.yaml --merge manual\n\n# Force merge all PRs (useful for urgent updates)\nxfg --config ./config.yaml --merge force\n\n# Push directly to default branch without creating PRs\nxfg --config ./config.yaml --merge direct\n</code></pre>"},{"location":"configuration/pr-options/#direct-push-mode","title":"Direct Push Mode","text":"<p>The <code>direct</code> mode pushes changes directly to the default branch without creating a PR. This is useful for:</p> <ul> <li>Repos without branch protection</li> <li>Internal tools where PR review isn't required</li> <li>Quick config updates where you have direct push permissions</li> </ul> <pre><code>prOptions:\n  merge: direct\n\nrepos:\n  - git: git@github.com:org/internal-tool.git\n</code></pre> <p>Note: If the target branch has branch protection enabled, the push will fail with a helpful error message suggesting to use <code>merge: force</code> instead.</p>"},{"location":"configuration/pr-options/#github-auto-merge-note","title":"GitHub Auto-Merge Note","text":"<p>The <code>auto</code> mode requires auto-merge to be enabled in the repository settings. If not enabled, the tool will warn and leave the PR open for manual review.</p> <p>Enable it with:</p> <pre><code>gh repo edit org/repo --enable-auto-merge\n</code></pre>"},{"location":"configuration/pr-options/#priority-order","title":"Priority Order","text":"<ol> <li>CLI flags (highest)</li> <li>Per-repo <code>prOptions</code></li> <li>Global <code>prOptions</code></li> <li>Built-in defaults (lowest)</li> </ol>"},{"location":"configuration/pr-templates/","title":"PR Templates","text":"<p>Customize the PR body with a template using <code>${xfg:...}</code> variables.</p>"},{"location":"configuration/pr-templates/#basic-usage","title":"Basic Usage","text":"<pre><code>prTemplate: |\n  ## Configuration Update\n\n  This PR synchronizes files to ${xfg:repo.fullName}:\n\n  ${xfg:pr.fileChanges}\n\n  Please review and merge.\n\nfiles:\n  .prettierrc.json:\n    content:\n      semi: false\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"configuration/pr-templates/#external-template-file","title":"External Template File","text":"<p>Reference an external file for larger templates:</p> <pre><code>prTemplate: \"@templates/pr-body.md\"\n\nfiles:\n  # ...\n\nrepos:\n  # ...\n</code></pre>"},{"location":"configuration/pr-templates/#available-variables","title":"Available Variables","text":"<p>PR templates support all templating variables, plus PR-specific variables:</p> Variable Description Example Output <code>${xfg:pr.fileChanges}</code> Bulleted list of files with actions <code>- Created \\</code>config.json`\\n- Updated `settings.yaml`` <code>${xfg:pr.fileCount}</code> Number of changed files <code>3</code> <code>${xfg:pr.title}</code> The generated PR title <code>chore: sync config.json, settings.yaml</code> <code>${xfg:repo.name}</code> Repository name <code>my-repo</code> <code>${xfg:repo.owner}</code> Repository owner <code>my-org</code> <code>${xfg:repo.fullName}</code> Full repository path <code>my-org/my-repo</code> <code>${xfg:repo.platform}</code> Platform type <code>github</code>, <code>azure-devops</code>, <code>gitlab</code>"},{"location":"configuration/pr-templates/#default-template","title":"Default Template","text":"<p>If <code>prTemplate</code> is not specified, xfg uses a built-in template:</p> <pre><code>## Summary\n\nAutomated sync of configuration files to ${xfg:repo.fullName}.\n\n## Changes\n\n${xfg:pr.fileChanges}\n\n## Source\n\nConfiguration synced using [xfg](https://github.com/anthony-spruyt/xfg).\n</code></pre>"},{"location":"configuration/pr-templates/#example-template","title":"Example Template","text":"<pre><code>## Summary\n\nAutomated configuration sync to ${xfg:repo.fullName}.\n\n## Changes (${xfg:pr.fileCount} files)\n\n${xfg:pr.fileChanges}\n\n## Notes\n\n- Review changes before merging\n- Contact @platform-team with questions\n</code></pre>"},{"location":"configuration/templating/","title":"Templating","text":"<p>Use <code>${xfg:variable}</code> syntax to inject repo-specific values into file content. This enables creating templates that automatically adapt to each target repository.</p>"},{"location":"configuration/templating/#enabling-templating","title":"Enabling Templating","text":"<p>Set <code>template: true</code> on a file to enable variable substitution:</p> <pre><code>files:\n  README.md:\n    template: true\n    content: |\n      # ${xfg:repo.name}\n\n      Repository: ${xfg:repo.fullName}\n      Platform: ${xfg:repo.platform}\n\nrepos:\n  - git: git@github.com:my-org/backend-service.git\n  - git: git@github.com:my-org/frontend-app.git\n</code></pre>"},{"location":"configuration/templating/#built-in-variables","title":"Built-in Variables","text":"Variable Description Example Value <code>${xfg:repo.name}</code> Repository name <code>my-service</code> <code>${xfg:repo.owner}</code> Owner/organization <code>my-org</code> <code>${xfg:repo.fullName}</code> Full repo path <code>my-org/my-service</code> <code>${xfg:repo.url}</code> Git URL <code>git@github.com:my-org/my-service.git</code> <code>${xfg:repo.platform}</code> Platform type <code>github</code>, <code>azure-devops</code>, <code>gitlab</code> <code>${xfg:repo.host}</code> Host domain <code>github.com</code> <code>${xfg:file.name}</code> Current file name <code>README.md</code> <code>${xfg:date}</code> Current date <code>2026-01-22</code>"},{"location":"configuration/templating/#platform-specific-fullname","title":"Platform-Specific fullName","text":"<p>The <code>repo.fullName</code> variable adapts to each platform's conventions:</p> <ul> <li>GitHub: <code>owner/repo</code> (e.g., <code>my-org/backend</code>)</li> <li>Azure DevOps: <code>organization/project/repo</code> (e.g., <code>contoso/platform/api</code>)</li> <li>GitLab: <code>namespace/repo</code> (e.g., <code>acme/infra/terraform</code> for nested groups)</li> </ul>"},{"location":"configuration/templating/#custom-variables","title":"Custom Variables","text":"<p>Define custom variables with the <code>vars</code> property:</p> <pre><code>files:\n  deploy.yaml:\n    template: true\n    vars:\n      environment: production\n      region: us-east-1\n    content:\n      name: Deploy ${xfg:repo.name}\n      env:\n        ENVIRONMENT: ${xfg:environment}\n        AWS_REGION: ${xfg:region}\n\nrepos:\n  - git: git@github.com:my-org/api.git\n</code></pre>"},{"location":"configuration/templating/#per-repo-variable-overrides","title":"Per-Repo Variable Overrides","text":"<p>Override or add variables for specific repositories:</p> <pre><code>files:\n  deploy.yaml:\n    template: true\n    vars:\n      environment: production\n    content:\n      deployment:\n        name: ${xfg:repo.name}\n        env: ${xfg:environment}\n        region: ${xfg:region}\n\nrepos:\n  - git: git@github.com:my-org/api.git\n    files:\n      deploy.yaml:\n        vars:\n          environment: staging # Override\n          region: eu-west-1 # Add new var\n</code></pre> <p>Per-repo vars merge with root-level vars, with per-repo taking precedence.</p>"},{"location":"configuration/templating/#escaping-variable-syntax","title":"Escaping Variable Syntax","text":"<p>Use <code>$$</code> to output literal <code>${xfg:...}</code> in the file:</p> <pre><code>files:\n  README.md:\n    template: true\n    content: |\n      # ${xfg:repo.name}\n\n      ## Template Syntax\n\n      Use `$${xfg:repo.name}` to reference the repo name.\n\nrepos:\n  - git: git@github.com:my-org/my-repo.git\n</code></pre> <p>Output:</p> <pre><code># my-repo\n\n## Template Syntax\n\nUse `${xfg:repo.name}` to reference the repo name.\n</code></pre>"},{"location":"configuration/templating/#complete-example","title":"Complete Example","text":"<pre><code>files:\n  # README template with dynamic repo info\n  README.md:\n    template: true\n    content: |\n      # ${xfg:repo.name}\n\n      [![Build](https://${xfg:repo.host}/${xfg:repo.fullName}/actions/workflows/ci.yml/badge.svg)](https://${xfg:repo.host}/${xfg:repo.fullName}/actions)\n\n      ## Installation\n\n      ```bash\n      npm install @${xfg:repo.owner}/${xfg:repo.name}\n      ```\n\n      ## License\n\n      MIT - ${xfg:repo.owner}\n\n  # Package.json with scoped package name\n  package.json:\n    template: true\n    content:\n      name: \"@${xfg:repo.owner}/${xfg:repo.name}\"\n      repository:\n        type: git\n        url: ${xfg:repo.url}\n      homepage: \"https://${xfg:repo.host}/${xfg:repo.fullName}\"\n\n  # CI workflow with environment-specific config\n  \".github/workflows/deploy.yml\":\n    template: true\n    vars:\n      cluster: main-cluster\n    content:\n      name: Deploy ${xfg:repo.name}\n      on:\n        push:\n          branches: [main]\n      env:\n        SERVICE_NAME: ${xfg:repo.name}\n        CLUSTER: ${xfg:cluster}\n\nrepos:\n  - git: git@github.com:acme-corp/user-service.git\n  - git: git@github.com:acme-corp/order-service.git\n    files:\n      \".github/workflows/deploy.yml\":\n        vars:\n          cluster: secondary-cluster # Different cluster for this repo\n</code></pre>"},{"location":"configuration/templating/#combining-with-environment-variables","title":"Combining with Environment Variables","text":"<p>xfg templates and environment variables can be used together. Environment variable interpolation (<code>${VAR}</code>) runs during config loading, while xfg templating (<code>${xfg:...}</code>) runs during file processing:</p> <pre><code>files:\n  config.yaml:\n    template: true\n    content:\n      service: ${xfg:repo.name}\n      apiKey: ${API_KEY} # From environment\n\nrepos:\n  - git: git@github.com:my-org/api.git\n</code></pre> <p>If you need literal <code>${...}</code> syntax in the output for any templating system, escape both:</p> <ul> <li><code>$${VAR}</code> outputs <code>${VAR}</code> (env var syntax)</li> <li><code>$${xfg:var}</code> outputs <code>${xfg:var}</code> (xfg template syntax)</li> </ul>"},{"location":"examples/","title":"Examples Overview","text":"<p>This section contains real-world examples demonstrating xfg's capabilities.</p>"},{"location":"examples/#basic-examples","title":"Basic Examples","text":"<ul> <li>Multi-File Sync - Sync multiple config files to multiple repos</li> <li>Shared Config Across Teams - Define common settings with team-specific overrides</li> </ul>"},{"location":"examples/#content-formatting","title":"Content &amp; Formatting","text":"<ul> <li>YAML Comments &amp; Empty Files - Add schema directives and header comments</li> <li>Text Files - Sync <code>.gitignore</code>, <code>.markdownlintignore</code>, and other text files</li> <li>Executable Files - Shell scripts and executable permissions</li> <li>Subdirectory Paths - Sync files to nested directories</li> </ul>"},{"location":"examples/#advanced-features","title":"Advanced Features","text":"<ul> <li>Environment-Specific Values - Use environment variables for dynamic values</li> <li>Per-File Merge Strategies - Control how arrays merge</li> <li>Create-Only Files - Files that are created once but not overwritten</li> <li>File References - Load content from external template files</li> <li>Auto-Merge PRs - Automatic PR merging options</li> <li>Delete Orphaned Files - Auto-delete files removed from config</li> </ul>"},{"location":"examples/auto-merge/","title":"Auto-Merge PRs","text":"<p>By default, xfg enables auto-merge on PRs when checks pass. You can override this behavior per-repo or via CLI flags.</p>"},{"location":"examples/auto-merge/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n\n# Default behavior (auto-merge with squash, delete branch) - no prOptions needed\nrepos:\n  # These repos use defaults (auto-merge with squash, delete branch)\n  - git:\n      - git@github.com:org/frontend.git\n      - git@github.com:org/backend.git\n\n  # This repo overrides to manual (leave PR open for review)\n  - git: git@github.com:org/needs-review.git\n    prOptions:\n      merge: manual\n\n  # This repo overrides to force merge (bypass required reviews)\n  - git: git@github.com:org/internal-tool.git\n    prOptions:\n      merge: force\n      bypassReason: \"Automated config sync\" # Azure DevOps only\n</code></pre>"},{"location":"examples/auto-merge/#merge-modes","title":"Merge Modes","text":"Mode GitHub Behavior Azure DevOps Behavior GitLab Behavior <code>manual</code> Leave PR open for review Leave PR open for review Leave MR open for review <code>auto</code> Enable auto-merge (default) Enable auto-complete Merge when pipeline succeeds <code>force</code> Merge with <code>--admin</code> (bypass checks) Bypass policies Merge immediately <code>direct</code> Push directly to default branch (no PR) Push directly (no PR) Push directly (no MR)"},{"location":"examples/auto-merge/#github-auto-merge-note","title":"GitHub Auto-Merge Note","text":"<p>The <code>auto</code> mode requires auto-merge to be enabled in the repository settings. If not enabled, the tool will warn and leave the PR open for manual review.</p> <p>Enable it with:</p> <pre><code>gh repo edit org/repo --enable-auto-merge\n</code></pre>"},{"location":"examples/auto-merge/#cli-override","title":"CLI Override","text":"<p>CLI flags override config file settings:</p> <pre><code># Disable auto-merge, leave PRs open for review\nxfg --config ./config.yaml --merge manual\n\n# Force merge all PRs (useful for urgent updates)\nxfg --config ./config.yaml --merge force\n\n# Push directly to default branch (no PR created)\nxfg --config ./config.yaml --merge direct\n</code></pre>"},{"location":"examples/auto-merge/#direct-push-mode","title":"Direct Push Mode","text":"<p>The <code>direct</code> mode pushes changes directly to the default branch without creating a PR/MR:</p> <pre><code>id: my-org-config\nfiles:\n  .prettierrc.json:\n    content:\n      semi: false\n\nprOptions:\n  merge: direct\n\nrepos:\n  - git: git@github.com:org/internal-tool.git\n</code></pre> <p>Use <code>direct</code> mode when:</p> <ul> <li>The repo has no branch protection</li> <li>You have bypass permissions configured</li> <li>PR review isn't required for the target repo</li> </ul> <p>Note: If branch protection rejects the push, you'll get a helpful error suggesting to use <code>merge: force</code> instead.</p>"},{"location":"examples/auto-merge/#pr-options-reference","title":"PR Options Reference","text":"Field Description Default <code>merge</code> Merge mode: <code>manual</code>, <code>auto</code>, <code>force</code>, <code>direct</code> <code>auto</code> <code>mergeStrategy</code> How to merge: <code>merge</code>, <code>squash</code>, <code>rebase</code> <code>squash</code> <code>deleteBranch</code> Delete source branch after merge <code>true</code> <code>bypassReason</code> Reason for bypassing policies (Azure DevOps only, required for <code>force</code>) -"},{"location":"examples/create-only/","title":"Create-Only Files","text":"<p>Some files should only be created once as defaults, allowing repos to maintain their own versions.</p>"},{"location":"examples/create-only/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  .trivyignore.yaml:\n    createOnly: true # Only create if doesn't exist\n    content:\n      vulnerabilities: []\n\n  .prettierignore:\n    createOnly: true\n    content:\n      patterns:\n        - \"dist/\"\n        - \"node_modules/\"\n\n  eslint.config.json:\n    content: # Always synced (no createOnly)\n      extends: [\"@company/base\"]\n\nrepos:\n  - git: git@github.com:org/repo.git\n    # .trivyignore.yaml and .prettierignore only created if missing\n    # eslint.config.json always updated\n\n  - git: git@github.com:org/special-repo.git\n    files:\n      .trivyignore.yaml:\n        createOnly: false # Override: always sync this file\n</code></pre>"},{"location":"examples/create-only/#behavior","title":"Behavior","text":"File <code>createOnly</code> Behavior <code>.trivyignore.yaml</code> <code>true</code> Created only if it doesn't exist <code>.prettierignore</code> <code>true</code> Created only if it doesn't exist <code>eslint.config.json</code> not set Always synced (created or updated)"},{"location":"examples/create-only/#per-repo-override","title":"Per-Repo Override","text":"<p>You can override <code>createOnly</code> per-repo:</p> <pre><code>id: my-org-config\nfiles:\n  .trivyignore.yaml:\n    createOnly: true\n    content:\n      vulnerabilities: []\n\nrepos:\n  # Uses createOnly: true\n  - git: git@github.com:org/normal-repo.git\n\n  # Override to always sync\n  - git: git@github.com:org/special-repo.git\n    files:\n      .trivyignore.yaml:\n        createOnly: false\n</code></pre>"},{"location":"examples/delete-orphaned/","title":"Delete Orphaned Files","text":"<p>Track managed files and automatically delete them when removed from your config.</p>"},{"location":"examples/delete-orphaned/#how-it-works","title":"How It Works","text":"<p>When you set <code>deleteOrphaned: true</code> on a file, xfg tracks it in a <code>.xfg.json</code> manifest file in each target repository. If you later remove that file from your config, xfg will delete it from the repos on the next sync.</p>"},{"location":"examples/delete-orphaned/#basic-usage","title":"Basic Usage","text":"<pre><code>id: my-org-standards\nfiles:\n  .prettierrc.json:\n    content:\n      semi: false\n      singleQuote: true\n    deleteOrphaned: true # Track this file\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>When you remove <code>.prettierrc.json</code> from this config and run xfg again, the file will be deleted from the target repo.</p>"},{"location":"examples/delete-orphaned/#inheritance","title":"Inheritance","text":"<p><code>deleteOrphaned</code> follows the standard inheritance pattern:</p> <ol> <li>Global default - Set at root level applies to all files</li> <li>Per-file - Overrides global default for specific files</li> <li>Per-repo - Overrides both global and per-file for specific repos</li> </ol>"},{"location":"examples/delete-orphaned/#global-default","title":"Global Default","text":"<pre><code>id: my-org-standards\ndeleteOrphaned: true # Track all files by default\n\nfiles:\n  .prettierrc.json:\n    content: { semi: false }\n  .eslintrc.json:\n    content: { extends: \"standard\" }\n    deleteOrphaned: false # This file won't be tracked\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"examples/delete-orphaned/#per-repo-override","title":"Per-Repo Override","text":"<pre><code>id: my-org-standards\nfiles:\n  .prettierrc.json:\n    content: { semi: false }\n    deleteOrphaned: true\n\nrepos:\n  - git: git@github.com:org/special-repo.git\n    files:\n      .prettierrc.json:\n        deleteOrphaned: false # Don't track for this repo only\n</code></pre>"},{"location":"examples/delete-orphaned/#disabling-at-runtime","title":"Disabling at Runtime","text":"<p>Use the <code>--no-delete</code> CLI flag to skip deletion even if configured:</p> <pre><code>xfg --config config.yaml --no-delete\n</code></pre> <p>This is useful for:</p> <ul> <li>Testing changes before committing to deletions</li> <li>Running in environments where you want to sync but not delete</li> </ul>"},{"location":"examples/delete-orphaned/#the-manifest-file","title":"The Manifest File","text":"<p>xfg creates a <code>.xfg.json</code> file in each target repository to track managed files. The manifest is namespaced by config ID, allowing multiple xfg configs to manage the same repo without conflicts:</p> <pre><code>{\n  \"version\": 2,\n  \"configs\": {\n    \"my-org-standards\": [\".prettierrc.json\", \".eslintrc.json\"],\n    \"team-a-config\": [\"team-a-specific.json\"]\n  }\n}\n</code></pre> <p>This file is committed alongside your synced files. Only files listed under a config's namespace can be deleted by that config.</p>"},{"location":"examples/delete-orphaned/#multiple-configs","title":"Multiple Configs","text":"<p>The <code>id</code> field enables multiple xfg configs to manage the same repository without interfering with each other. Each config only manages files in its own namespace:</p> <ul> <li>Config A (<code>id: team-a-standards</code>) manages <code>foo.json</code>, <code>bar.yaml</code></li> <li>Config B (<code>id: team-b-standards</code>) manages <code>baz.json</code></li> </ul> <p>When Config A removes <code>foo.json</code> from its config, only <code>foo.json</code> is deleted - Config B's files are untouched.</p>"},{"location":"examples/delete-orphaned/#dry-run","title":"Dry Run","text":"<p>When using <code>--dry-run</code>, xfg shows which files would be deleted without making changes:</p> <pre><code>xfg --config config.yaml --dry-run\n</code></pre> <p>Output shows <code>[DELETED]</code> badges for files that would be removed.</p>"},{"location":"examples/delete-orphaned/#safety-features","title":"Safety Features","text":"<ul> <li>Opt-in by default: Files are not tracked unless you explicitly set <code>deleteOrphaned: true</code></li> <li>Manifest-based: Only files previously synced with <code>deleteOrphaned: true</code> can be deleted</li> <li>Namespaced: Each config ID has its own namespace - configs can't delete each other's files</li> <li>Runtime override: Use <code>--no-delete</code> to skip deletions at any time</li> <li>Clear visibility: Deleted files are shown prominently in dry-run output and PR descriptions</li> </ul>"},{"location":"examples/env-specific/","title":"Environment-Specific Values","text":"<p>Use environment variables for secrets and environment-specific values.</p>"},{"location":"examples/env-specific/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  app.config.json:\n    content:\n      database:\n        host: ${DB_HOST:-localhost}\n        port: ${DB_PORT:-5432}\n        password: ${DB_PASSWORD:?Database password required}\n\n      api:\n        baseUrl: ${API_BASE_URL}\n        timeout: 30000\n\nrepos:\n  - git: git@github.com:org/backend.git\n</code></pre>"},{"location":"examples/env-specific/#running-with-environment-variables","title":"Running with Environment Variables","text":"<pre><code>export DB_HOST=prod-db.example.com\nexport DB_PORT=5432\nexport DB_PASSWORD=secret123\nexport API_BASE_URL=https://api.example.com\n\nxfg --config ./config.yaml\n</code></pre>"},{"location":"examples/env-specific/#result","title":"Result","text":"<pre><code>{\n  \"database\": {\n    \"host\": \"prod-db.example.com\",\n    \"port\": \"5432\",\n    \"password\": \"secret123\"\n  },\n  \"api\": {\n    \"baseUrl\": \"https://api.example.com\",\n    \"timeout\": 30000\n  }\n}\n</code></pre>"},{"location":"examples/env-specific/#syntax-reference","title":"Syntax Reference","text":"Syntax Behavior <code>${VAR}</code> Required - errors if not set <code>${VAR:-default}</code> Use default value if variable is not set <code>${VAR:?message}</code> Required with custom error message <code>$${VAR}</code> Escape - outputs literal <code>${VAR}</code>"},{"location":"examples/executable-files/","title":"Executable Files","text":"<p>Shell scripts (<code>.sh</code> files) are automatically marked as executable using <code>git update-index --add --chmod=+x</code>.</p>"},{"location":"examples/executable-files/#auto-executable-shell-scripts","title":"Auto-Executable Shell Scripts","text":"<p><code>.sh</code> files are automatically executable:</p> <pre><code>id: my-org-config\nfiles:\n  deploy.sh:\n    content: |-\n      #!/bin/bash\n      echo \"Deploying...\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"examples/executable-files/#disable-auto-executable","title":"Disable Auto-Executable","text":"<p>Disable for a specific <code>.sh</code> file:</p> <pre><code>id: my-org-config\nfiles:\n  template.sh:\n    executable: false\n    content: \"# This is just a template\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"examples/executable-files/#make-non-sh-files-executable","title":"Make Non-.sh Files Executable","text":"<p>Mark any file as executable:</p> <pre><code>id: my-org-config\nfiles:\n  run:\n    executable: true\n    content: |-\n      #!/usr/bin/env python3\n      print(\"Hello\")\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"examples/executable-files/#per-repo-override","title":"Per-Repo Override","text":"<p>Override executable settings per-repo:</p> <pre><code>id: my-org-config\nfiles:\n  deploy.sh:\n    content: |-\n      #!/bin/bash\n      echo \"Deploying...\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n    files:\n      deploy.sh:\n        executable: false # Disable for this repo only\n</code></pre>"},{"location":"examples/executable-files/#summary","title":"Summary","text":"File Type Default Behavior Override <code>.sh</code> files Automatically executable <code>executable: false</code> Other files Not executable <code>executable: true</code>"},{"location":"examples/file-references/","title":"File References","text":"<p>Load content from external template files instead of inline content.</p>"},{"location":"examples/file-references/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  .prettierrc.json:\n    content: \"@templates/prettierrc.json\"\n  .eslintrc.yaml:\n    content: \"@templates/eslintrc.yaml\"\n    header: \"Auto-generated - do not edit\"\n    schemaUrl: \"https://json.schemastore.org/eslintrc\"\n  .gitignore:\n    content: \"@templates/gitignore.txt\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre>"},{"location":"examples/file-references/#directory-structure","title":"Directory Structure","text":"<pre><code>config/\n  sync-config.yaml         # content: \"@templates/prettier.json\"\n  templates/\n    prettierrc.json        # Actual Prettier config\n    eslintrc.yaml          # Actual ESLint config\n    gitignore.txt          # Template .gitignore content\n</code></pre>"},{"location":"examples/file-references/#how-it-works","title":"How It Works","text":"<ul> <li>File references start with <code>@</code> followed by a relative path</li> <li>Paths are resolved relative to the config file's directory</li> <li>JSON/JSON5/YAML files are parsed as objects</li> <li>Other files are returned as strings</li> <li>Metadata fields (<code>header</code>, <code>schemaUrl</code>, <code>createOnly</code>, <code>mergeStrategy</code>) remain in the config</li> </ul>"},{"location":"examples/file-references/#per-repo-overlays-still-work","title":"Per-Repo Overlays Still Work","text":"<p>Per-repo content overlays merge onto the resolved file content:</p> <pre><code>id: my-org-config\nfiles:\n  .eslintrc.json:\n    content: \"@templates/eslintrc.json\" # Base config from file\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    files:\n      .eslintrc.json:\n        content:\n          extends: [\"plugin:react/recommended\"] # Merged with template\n</code></pre>"},{"location":"examples/file-references/#security","title":"Security","text":"<p>File references are restricted to the config file's directory tree:</p> Reference Status <code>@templates/config.json</code> Valid <code>@../../../etc/passwd</code> Blocked <code>@/etc/passwd</code> Blocked <p>Attempts to escape the config directory will result in a validation error.</p>"},{"location":"examples/merge-strategies/","title":"Per-File Merge Strategies","text":"<p>Different files can use different array merge strategies.</p>"},{"location":"examples/merge-strategies/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  eslint.config.json:\n    mergeStrategy: append # Extends will append\n    content:\n      extends: [\"@company/base\"]\n\n  tsconfig.json:\n    mergeStrategy: replace # Lib will replace entirely\n    content:\n      compilerOptions:\n        lib: [\"ES2022\"]\n\nrepos:\n  - git: git@github.com:org/frontend.git\n    files:\n      eslint.config.json:\n        content:\n          extends: [\"plugin:react/recommended\"]\n\n      tsconfig.json:\n        content:\n          compilerOptions:\n            lib: [\"ES2022\", \"DOM\"]\n</code></pre>"},{"location":"examples/merge-strategies/#results","title":"Results","text":"<p>eslint.config.json (append strategy):</p> <pre><code>{\n  \"extends\": [\"@company/base\", \"plugin:react/recommended\"]\n}\n</code></pre> <p>tsconfig.json (replace strategy):</p> <pre><code>{\n  \"compilerOptions\": {\n    \"lib\": [\"ES2022\", \"DOM\"]\n  }\n}\n</code></pre>"},{"location":"examples/merge-strategies/#available-strategies","title":"Available Strategies","text":"Strategy Behavior <code>replace</code> Overlay completely replaces base (default) <code>append</code> Overlay items added after base items <code>prepend</code> Overlay items added before base items"},{"location":"examples/multi-file-sync/","title":"Multi-File Sync","text":"<p>Sync multiple configuration files to all repos in a single run.</p>"},{"location":"examples/multi-file-sync/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  .eslintrc.json:\n    content:\n      extends: [\"@org/eslint-config\"]\n      rules:\n        no-console: warn\n\n  .prettierrc.yaml:\n    content:\n      semi: false\n      singleQuote: true\n\n  tsconfig.json:\n    content:\n      compilerOptions:\n        strict: true\n        target: ES2022\n\nrepos:\n  - git:\n      - git@github.com:org/frontend.git\n      - git@github.com:org/backend.git\n      - git@github.com:org/shared-lib.git\n</code></pre>"},{"location":"examples/multi-file-sync/#result","title":"Result","text":"<p>Each repository receives:</p> <ul> <li><code>.eslintrc.json</code> - ESLint configuration (JSON format)</li> <li><code>.prettierrc.yaml</code> - Prettier configuration (YAML format)</li> <li><code>tsconfig.json</code> - TypeScript configuration (JSON format)</li> </ul> <p>A single PR is created in each repo containing all three files.</p>"},{"location":"examples/shared-config/","title":"Shared Config Across Teams","text":"<p>Define common settings once, customize per team.</p>"},{"location":"examples/shared-config/#example","title":"Example","text":"<pre><code>id: my-org-service-config\nfiles:\n  service.config.json:\n    content:\n      version: \"2.0\"\n      logging:\n        level: info\n        format: json\n      features:\n        - health-check\n        - metrics\n\nrepos:\n  # Platform team repos - add extra features\n  - git:\n      - git@github.com:org/api-gateway.git\n      - git@github.com:org/auth-service.git\n    files:\n      service.config.json:\n        content:\n          team: platform\n          features:\n            $arrayMerge: append\n            values:\n              - tracing\n              - rate-limiting\n\n  # Data team repos - different logging\n  - git:\n      - git@github.com:org/data-pipeline.git\n      - git@github.com:org/analytics.git\n    files:\n      service.config.json:\n        content:\n          team: data\n          logging:\n            level: debug\n\n  # Legacy service - completely different config\n  - git: git@github.com:org/legacy-api.git\n    files:\n      service.config.json:\n        override: true\n        content:\n          version: \"1.0\"\n          legacy: true\n</code></pre>"},{"location":"examples/shared-config/#results","title":"Results","text":"<p>Platform team repos get:</p> <pre><code>{\n  \"version\": \"2.0\",\n  \"logging\": { \"level\": \"info\", \"format\": \"json\" },\n  \"features\": [\"health-check\", \"metrics\", \"tracing\", \"rate-limiting\"],\n  \"team\": \"platform\"\n}\n</code></pre> <p>Data team repos get:</p> <pre><code>{\n  \"version\": \"2.0\",\n  \"logging\": { \"level\": \"debug\", \"format\": \"json\" },\n  \"features\": [\"health-check\", \"metrics\"],\n  \"team\": \"data\"\n}\n</code></pre> <p>Legacy service gets (override ignores base):</p> <pre><code>{\n  \"version\": \"1.0\",\n  \"legacy\": true\n}\n</code></pre>"},{"location":"examples/subdirectory-paths/","title":"Subdirectory Paths","text":"<p>Sync files to any subdirectory path. Parent directories are created automatically.</p>"},{"location":"examples/subdirectory-paths/#example","title":"Example","text":"<pre><code>id: my-org-config\nfiles:\n  # GitHub Actions workflow\n  \".github/workflows/ci.yaml\":\n    content:\n      name: CI\n      on: [push, pull_request]\n      jobs:\n        build:\n          runs-on: ubuntu-latest\n          steps:\n            - uses: actions/checkout@v4\n\n  # Nested config directory\n  \"config/settings/app.json\":\n    content:\n      environment: production\n      debug: false\n\nrepos:\n  - git:\n      - git@github.com:org/frontend.git\n      - git@github.com:org/backend.git\n</code></pre>"},{"location":"examples/subdirectory-paths/#result","title":"Result","text":"<p>Each repository gets:</p> <pre><code>.github/\n  workflows/\n    ci.yaml\nconfig/\n  settings/\n    app.json\n</code></pre> <p>Parent directories (<code>.github/workflows/</code> and <code>config/settings/</code>) are created if they don't exist.</p> <p>Note</p> <p>Quote file paths containing <code>/</code> in YAML keys to ensure proper parsing.</p>"},{"location":"examples/text-files/","title":"Text Files","text":"<p>Sync text files like <code>.gitignore</code>, <code>.markdownlintignore</code>, or <code>.env.example</code> using string or lines array content.</p>"},{"location":"examples/text-files/#string-content-multiline-text","title":"String Content (Multiline Text)","text":"<pre><code>id: my-org-config\nfiles:\n  .markdownlintignore:\n    createOnly: true\n    content: |-\n      # Claude Code generated files\n      .claude/\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>Output:</p> <pre><code># Claude Code generated files\n.claude/\n</code></pre>"},{"location":"examples/text-files/#lines-array-with-merge-strategy","title":"Lines Array with Merge Strategy","text":"<pre><code>id: my-org-config\nfiles:\n  .gitignore:\n    mergeStrategy: append\n    content:\n      - \"node_modules/\"\n      - \"dist/\"\n\nrepos:\n  - git: git@github.com:org/repo.git\n    files:\n      .gitignore:\n        content:\n          - \"coverage/\" # Appended to base lines\n\n  - git: git@github.com:org/another-repo.git\n    files:\n      .gitignore:\n        content:\n          - \".env.local\" # Appended to base lines\n</code></pre> <p>Result for first repo:</p> <pre><code>node_modules/\ndist/\ncoverage/\n</code></pre>"},{"location":"examples/text-files/#content-types-summary","title":"Content Types Summary","text":"Type Syntax Merge Behavior String <code>content: \\|-</code> or <code>content: \"text\"</code> Always replaces (no merge) Lines array <code>content: [\"line1\", \"line2\"]</code> Supports append/prepend/replace"},{"location":"examples/text-files/#validation-rules","title":"Validation Rules","text":"<ul> <li><code>.json</code>, <code>.json5</code>, <code>.yaml</code>, <code>.yml</code> files must have object content</li> <li>Other file extensions must have string or string[] content</li> </ul>"},{"location":"examples/yaml-comments/","title":"YAML Comments &amp; Empty Files","text":"<p>Add schema directives and comments to YAML files, or create empty files.</p>"},{"location":"examples/yaml-comments/#schema-directive","title":"Schema Directive","text":"<pre><code>id: my-org-config\nfiles:\n  trivy.yaml:\n    schemaUrl: https://trivy.dev/latest/docs/references/configuration/config-file/\n    content:\n      exit-code: 1\n      scan:\n        scanners:\n          - vuln\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>Output:</p> <pre><code># yaml-language-server: $schema=https://trivy.dev/latest/docs/references/configuration/config-file/\nexit-code: 1\nscan:\n  scanners:\n    - vuln\n</code></pre>"},{"location":"examples/yaml-comments/#header-comment","title":"Header Comment","text":"<pre><code>id: my-org-config\nfiles:\n  trivy.yaml:\n    schemaUrl: https://trivy.dev/latest/docs/references/configuration/config-file/\n    header: \"Trivy security scanner configuration\"\n    content:\n      exit-code: 1\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>Output:</p> <pre><code># yaml-language-server: $schema=https://trivy.dev/latest/docs/references/configuration/config-file/\n# Trivy security scanner configuration\nexit-code: 1\n</code></pre>"},{"location":"examples/yaml-comments/#multi-line-header","title":"Multi-Line Header","text":"<pre><code>id: my-org-config\nfiles:\n  config.yaml:\n    header:\n      - \"Auto-generated configuration\"\n      - \"Do not edit manually\"\n    content:\n      version: 1\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>Output:</p> <pre><code># Auto-generated configuration\n# Do not edit manually\nversion: 1\n</code></pre>"},{"location":"examples/yaml-comments/#empty-files","title":"Empty Files","text":"<p>Omit <code>content</code> to create an empty file:</p> <pre><code>id: my-org-config\nfiles:\n  .prettierignore:\n    createOnly: true\n    # No content = empty file\n\nrepos:\n  - git: git@github.com:org/repo.git\n</code></pre> <p>Note</p> <p><code>header</code> and <code>schemaUrl</code> only apply to YAML output files (<code>.yaml</code>, <code>.yml</code>). They are ignored for JSON files.</p>"},{"location":"getting-started/","title":"Installation","text":""},{"location":"getting-started/#from-npm","title":"From npm","text":"<pre><code>npm install -g @aspruyt/xfg\n</code></pre>"},{"location":"getting-started/#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/anthony-spruyt/xfg.git\ncd xfg\nnpm install\nnpm run build\n</code></pre>"},{"location":"getting-started/#using-dev-container","title":"Using Dev Container","text":"<p>Open this repository in VS Code with the Dev Containers extension. The container includes all dependencies pre-installed and the project pre-built.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<p>After installation, you'll need to authenticate with your Git platform:</p> <ul> <li>GitHub Authentication</li> <li>Azure DevOps Authentication</li> <li>GitLab Authentication</li> </ul>"},{"location":"getting-started/prerequisites/","title":"Prerequisites","text":"<p>xfg requires authentication with the Git platforms you're targeting. Each platform uses its official CLI tool.</p>"},{"location":"getting-started/prerequisites/#github-authentication","title":"GitHub Authentication","text":"<p>Before using with GitHub repositories, authenticate with the GitHub CLI:</p> <pre><code>gh auth login\n</code></pre> <p>For GitHub Enterprise Server instances:</p> <pre><code>gh auth login --hostname github.mycompany.com\n</code></pre> <p>Required Scopes</p> <p>Your token needs the <code>repo</code> scope to create PRs in target repositories.</p>"},{"location":"getting-started/prerequisites/#azure-devops-authentication","title":"Azure DevOps Authentication","text":"<p>Before using with Azure DevOps repositories, authenticate with the Azure CLI:</p> <pre><code>az login\naz devops configure --defaults organization=https://dev.azure.com/YOUR_ORG project=YOUR_PROJECT\n</code></pre> <p>Required Permissions</p> <p>Ensure the user/service account has \"Contribute to pull requests\" permission.</p>"},{"location":"getting-started/prerequisites/#gitlab-authentication","title":"GitLab Authentication","text":"<p>Before using with GitLab repositories, authenticate with the GitLab CLI:</p> <pre><code>glab auth login\n</code></pre> <p>For self-hosted GitLab instances:</p> <pre><code>glab auth login --hostname gitlab.example.com\n</code></pre> <p>Required Permissions</p> <p>Ensure the user has at least \"Developer\" role on the project.</p>"},{"location":"platforms/","title":"Platform Support","text":"<p>xfg supports GitHub, Azure DevOps, and GitLab (including self-hosted instances). The platform is auto-detected from the git URL.</p>"},{"location":"platforms/#supported-platforms","title":"Supported Platforms","text":"Platform SSH URLs HTTPS URLs Self-Hosted GitHub Yes Yes - Azure DevOps Yes Yes - GitLab Yes Yes Yes"},{"location":"platforms/#platform-specific-details","title":"Platform-Specific Details","text":"<ul> <li>GitHub - SSH and HTTPS URL formats</li> <li>Azure DevOps - SSH and HTTPS URL formats</li> <li>GitLab - SSH, HTTPS, nested groups, and self-hosted instances</li> </ul>"},{"location":"platforms/azure-devops/","title":"Azure DevOps","text":""},{"location":"platforms/azure-devops/#url-formats","title":"URL Formats","text":"Format Example SSH <code>git@ssh.dev.azure.com:v3/organization/project/repo</code> HTTPS <code>https://dev.azure.com/organization/project/_git/repo</code>"},{"location":"platforms/azure-devops/#authentication","title":"Authentication","text":"<pre><code>az login\naz devops configure --defaults organization=https://dev.azure.com/YOUR_ORG project=YOUR_PROJECT\n</code></pre>"},{"location":"platforms/azure-devops/#required-permissions","title":"Required Permissions","text":"<p>The user/service account needs \"Contribute to pull requests\" permission on the target repositories.</p>"},{"location":"platforms/azure-devops/#auto-complete-auto-merge","title":"Auto-Complete (Auto-Merge)","text":"<p>Azure DevOps calls it \"auto-complete\" instead of auto-merge. When enabled, the PR automatically completes when all policies pass.</p> Merge Mode Azure DevOps Behavior <code>manual</code> Leave PR open for review <code>auto</code> Enable auto-complete (<code>az repos pr update --auto-complete true</code>) <code>force</code> Bypass policies (<code>--bypass-policy true</code>)"},{"location":"platforms/azure-devops/#bypass-reason","title":"Bypass Reason","text":"<p>When using <code>merge: force</code>, Azure DevOps requires a bypass reason:</p> <pre><code>repos:\n  - git: git@ssh.dev.azure.com:v3/org/project/repo\n    prOptions:\n      merge: force\n      bypassReason: \"Automated config sync\"\n</code></pre>"},{"location":"platforms/azure-devops/#pr-creation","title":"PR Creation","text":"<p>xfg uses the <code>az repos pr</code> CLI commands to:</p> <ol> <li>Create the PR</li> <li>Enable auto-complete or bypass policies as configured</li> </ol>"},{"location":"platforms/azure-devops/#direct-push-mode","title":"Direct Push Mode","text":"<p>With <code>merge: direct</code>, xfg skips PR creation entirely and pushes directly to the default branch:</p> <pre><code>prOptions:\n  merge: direct\n\nrepos:\n  - git: git@ssh.dev.azure.com:v3/org/project/repo\n</code></pre> <p>This is useful for repos without branch policies or when PR review isn't required. If the branch has policies that block direct pushes, the push will fail with a helpful error suggesting to use <code>merge: force</code> instead.</p> <p>When to use <code>direct</code> vs <code>force</code>:</p> <ul> <li><code>direct</code>: Repo has no branch policies, or you want to skip PR workflow entirely</li> <li><code>force</code>: Repo has branch policies, but you have permissions to bypass them (creates a PR and completes with <code>--bypass-policy</code>)</li> </ul>"},{"location":"platforms/github/","title":"GitHub","text":""},{"location":"platforms/github/#url-formats","title":"URL Formats","text":"Format Example SSH <code>git@github.com:owner/repo.git</code> HTTPS <code>https://github.com/owner/repo.git</code>"},{"location":"platforms/github/#authentication","title":"Authentication","text":"<pre><code>gh auth login\n</code></pre>"},{"location":"platforms/github/#github-enterprise-server","title":"GitHub Enterprise Server","text":"<p>xfg supports GitHub Enterprise Server (GHE) instances in addition to github.com.</p>"},{"location":"platforms/github/#ghe-url-formats","title":"GHE URL Formats","text":"Format Example SSH <code>git@github.mycompany.com:owner/repo.git</code> HTTPS <code>https://github.mycompany.com/owner/repo.git</code>"},{"location":"platforms/github/#configuration","title":"Configuration","text":"<p>To use GHE repositories, add the hostname(s) to the <code>githubHosts</code> array in your config:</p> <pre><code>githubHosts:\n  - github.mycompany.com\n  - ghe.internal.net\n\nfiles:\n  config.json:\n    content:\n      key: value\n\nrepos:\n  - git: git@github.mycompany.com:owner/repo.git\n  - git: https://ghe.internal.net/org/project.git\n</code></pre>"},{"location":"platforms/github/#authentication_1","title":"Authentication","text":"<p>Authenticate with each GHE instance using the <code>--hostname</code> flag:</p> <pre><code>gh auth login --hostname github.mycompany.com\n</code></pre>"},{"location":"platforms/github/#mixed-environments","title":"Mixed Environments","text":"<p>You can use github.com and GHE repositories in the same config file:</p> <pre><code>githubHosts:\n  - github.mycompany.com\n\nfiles:\n  shared-config.json:\n    content:\n      version: \"1.0\"\n\nrepos:\n  # github.com (no config needed)\n  - git: git@github.com:myorg/public-repo.git\n  # GitHub Enterprise\n  - git: git@github.mycompany.com:myorg/private-repo.git\n</code></pre>"},{"location":"platforms/github/#required-permissions","title":"Required Permissions","text":"<p>Your token needs the <code>repo</code> scope to create PRs in target repositories.</p>"},{"location":"platforms/github/#auto-merge","title":"Auto-Merge","text":"<p>GitHub's auto-merge feature requires it to be enabled in the repository settings.</p> <p>Check if enabled:</p> <pre><code>gh api repos/owner/repo --jq '.allow_auto_merge'\n</code></pre> <p>Enable it:</p> <pre><code>gh repo edit owner/repo --enable-auto-merge\n</code></pre> <p>If auto-merge is not enabled, xfg will warn and leave the PR open for manual review.</p>"},{"location":"platforms/github/#pr-creation","title":"PR Creation","text":"<p>xfg uses the <code>gh</code> CLI to:</p> <ol> <li>Create the PR with <code>gh pr create</code></li> <li>Enable auto-merge with <code>gh pr merge --auto</code> (if configured)</li> <li>Force merge with <code>gh pr merge --admin</code> (if <code>merge: force</code>)</li> </ol>"},{"location":"platforms/github/#direct-push-mode","title":"Direct Push Mode","text":"<p>With <code>merge: direct</code>, xfg skips PR creation entirely and pushes directly to the default branch:</p> <pre><code>prOptions:\n  merge: direct\n\nrepos:\n  - git: git@github.com:org/internal-tool.git\n</code></pre> <p>This is useful for repos without branch protection or when PR review isn't required. If the branch is protected, the push will fail with a helpful error suggesting to use <code>merge: force</code> instead.</p> <p>When to use <code>direct</code> vs <code>force</code>:</p> <ul> <li><code>direct</code>: Repo has no branch protection, or you want to skip PR workflow entirely</li> <li><code>force</code>: Repo has branch protection, but you have admin privileges to bypass it (creates a PR and merges with <code>--admin</code>)</li> </ul>"},{"location":"platforms/gitlab/","title":"GitLab","text":""},{"location":"platforms/gitlab/#url-formats","title":"URL Formats","text":""},{"location":"platforms/gitlab/#gitlabcom-saas","title":"GitLab.com (SaaS)","text":"Format Example SSH <code>git@gitlab.com:owner/repo.git</code> HTTPS <code>https://gitlab.com/owner/repo.git</code>"},{"location":"platforms/gitlab/#nested-groups","title":"Nested Groups","text":"<p>GitLab supports nested groups in the path:</p> <pre><code>git@gitlab.com:org/group/subgroup/repo.git\n</code></pre>"},{"location":"platforms/gitlab/#self-hosted-instances","title":"Self-Hosted Instances","text":"Format Example SSH <code>git@gitlab.example.com:owner/repo.git</code> HTTPS <code>https://gitlab.example.com/owner/repo.git</code>"},{"location":"platforms/gitlab/#authentication","title":"Authentication","text":""},{"location":"platforms/gitlab/#gitlabcom","title":"GitLab.com","text":"<pre><code>glab auth login\n</code></pre>"},{"location":"platforms/gitlab/#self-hosted","title":"Self-Hosted","text":"<pre><code>glab auth login --hostname gitlab.example.com\n</code></pre>"},{"location":"platforms/gitlab/#required-permissions","title":"Required Permissions","text":"<p>The user needs at least \"Developer\" role on the project.</p>"},{"location":"platforms/gitlab/#merge-request-handling","title":"Merge Request Handling","text":"Merge Mode GitLab Behavior <code>manual</code> Leave MR open for review <code>auto</code> Merge when pipeline succeeds (<code>glab mr merge --when-pipeline-succeeds</code>) <code>force</code> Merge immediately (<code>glab mr merge -y</code>)"},{"location":"platforms/gitlab/#mr-creation","title":"MR Creation","text":"<p>xfg uses the <code>glab</code> CLI to:</p> <ol> <li>Create the merge request with <code>glab mr create</code></li> <li>Configure merge behavior based on <code>prOptions</code></li> </ol>"},{"location":"platforms/gitlab/#direct-push-mode","title":"Direct Push Mode","text":"<p>With <code>merge: direct</code>, xfg skips MR creation entirely and pushes directly to the default branch:</p> <pre><code>prOptions:\n  merge: direct\n\nrepos:\n  - git: git@gitlab.com:owner/repo.git\n</code></pre> <p>This is useful for repos without branch protection or when MR review isn't required. If the branch is protected, the push will fail with a helpful error suggesting to use <code>merge: force</code> instead.</p> <p>When to use <code>direct</code> vs <code>force</code>:</p> <ul> <li><code>direct</code>: Repo has no branch protection, or you want to skip MR workflow entirely</li> <li><code>force</code>: Repo has branch protection, but you have permissions to merge without pipeline (uses <code>glab mr merge -y</code> to merge immediately)</li> </ul>"},{"location":"reference/cli-options/","title":"CLI Options Reference","text":""},{"location":"reference/cli-options/#usage","title":"Usage","text":"<pre><code>xfg --config &lt;path&gt; [options]\n</code></pre>"},{"location":"reference/cli-options/#options","title":"Options","text":"Option Alias Description Default <code>--config</code> <code>-c</code> Path to YAML config file Required <code>--dry-run</code> <code>-d</code> Show what would be done without making changes <code>false</code> <code>--work-dir</code> <code>-w</code> Temporary directory for cloning <code>./tmp</code> <code>--retries</code> <code>-r</code> Number of retries for network operations <code>3</code> <code>--branch</code> <code>-b</code> Override branch name <code>chore/sync-{filename}</code> or <code>chore/sync-config</code> <code>--merge</code> <code>-m</code> PR merge mode: <code>manual</code>, <code>auto</code>, <code>force</code>, <code>direct</code> <code>auto</code> <code>--merge-strategy</code> Merge strategy: <code>merge</code>, <code>squash</code>, <code>rebase</code> <code>squash</code> <code>--delete-branch</code> Delete source branch after merge <code>true</code> <code>--no-delete</code> Skip deletion of orphaned files even if configured <code>false</code>"},{"location":"reference/cli-options/#examples","title":"Examples","text":""},{"location":"reference/cli-options/#basic-run","title":"Basic Run","text":"<pre><code>xfg --config ./config.yaml\n</code></pre>"},{"location":"reference/cli-options/#dry-run","title":"Dry Run","text":"<p>Preview changes without making them:</p> <pre><code>xfg --config ./config.yaml --dry-run\n</code></pre>"},{"location":"reference/cli-options/#custom-branch","title":"Custom Branch","text":"<pre><code>xfg --config ./config.yaml --branch feature/update-eslint\n</code></pre>"},{"location":"reference/cli-options/#override-merge-behavior","title":"Override Merge Behavior","text":"<pre><code># Leave PRs open for review\nxfg --config ./config.yaml --merge manual\n\n# Force merge (bypass checks)\nxfg --config ./config.yaml --merge force\n\n# Push directly to default branch (no PR)\nxfg --config ./config.yaml --merge direct\n</code></pre>"},{"location":"reference/cli-options/#increase-retries","title":"Increase Retries","text":"<pre><code>xfg --config ./config.yaml --retries 5\n</code></pre>"},{"location":"reference/cli-options/#custom-work-directory","title":"Custom Work Directory","text":"<pre><code>xfg --config ./config.yaml --work-dir ./my-temp\n</code></pre>"},{"location":"reference/cli-options/#skip-orphan-deletion","title":"Skip Orphan Deletion","text":"<p>Skip deletion of orphaned files even when <code>deleteOrphaned: true</code> is configured:</p> <pre><code>xfg --config ./config.yaml --no-delete\n</code></pre>"},{"location":"reference/cli-options/#priority-order","title":"Priority Order","text":"<p>CLI flags override config file settings:</p> <ol> <li>CLI flags (highest priority)</li> <li>Per-repo <code>prOptions</code></li> <li>Global <code>prOptions</code></li> <li>Built-in defaults (lowest priority)</li> </ol>"},{"location":"reference/config-schema/","title":"Config Schema Reference","text":"<p>The full JSON Schema for xfg configuration files is available at:</p> <pre><code>https://raw.githubusercontent.com/anthony-spruyt/xfg/main/config-schema.json\n</code></pre>"},{"location":"reference/config-schema/#using-the-schema","title":"Using the Schema","text":""},{"location":"reference/config-schema/#in-vs-code","title":"In VS Code","text":"<p>Add a comment at the top of your config file:</p> <pre><code># yaml-language-server: $schema=https://raw.githubusercontent.com/anthony-spruyt/xfg/main/config-schema.json\nfiles:\n  # ...\nrepos:\n  # ...\n</code></pre> <p>Or configure in <code>.vscode/settings.json</code>:</p> <pre><code>{\n  \"yaml.schemas\": {\n    \"https://raw.githubusercontent.com/anthony-spruyt/xfg/main/config-schema.json\": [\n      \"**/sync-config.yaml\",\n      \"**/config-sync.yaml\"\n    ]\n  }\n}\n</code></pre>"},{"location":"reference/config-schema/#schema-structure","title":"Schema Structure","text":""},{"location":"reference/config-schema/#root-object","title":"Root Object","text":"Field Type Required Description <code>id</code> <code>string</code> Yes Unique config identifier (alphanumeric, <code>-</code>, <code>_</code>) <code>files</code> <code>object</code> Yes Map of filenames to file configs <code>repos</code> <code>array</code> Yes List of repository configurations <code>prOptions</code> <code>PROptions</code> No Global PR merge options <code>prTemplate</code> <code>string</code> No Custom PR body template <code>githubHosts</code> <code>array</code> No GitHub Enterprise Server hostnames <code>deleteOrphaned</code> <code>boolean</code> No Global default for orphan file deletion"},{"location":"reference/config-schema/#file-config","title":"File Config","text":"Field Type Required Description <code>content</code> <code>object/string/array</code> No File content or <code>@path/to/file</code> ref <code>mergeStrategy</code> <code>string</code> No <code>replace</code>, <code>append</code>, <code>prepend</code> <code>createOnly</code> <code>boolean</code> No Only create if doesn't exist <code>executable</code> <code>boolean</code> No Mark file as executable <code>header</code> <code>string/array</code> No YAML header comment(s) <code>schemaUrl</code> <code>string</code> No YAML schema directive URL <code>template</code> <code>boolean</code> No Enable <code>${xfg:...}</code> variable support <code>vars</code> <code>object</code> No Custom template variables <code>deleteOrphaned</code> <code>boolean</code> No Track file for orphan deletion"},{"location":"reference/config-schema/#repo-config","title":"Repo Config","text":"Field Type Required Description <code>git</code> <code>string/array</code> Yes Git URL(s) <code>files</code> <code>object</code> No Per-repo file overrides <code>prOptions</code> <code>PROptions</code> No Per-repo PR options"},{"location":"reference/config-schema/#per-repo-file-override","title":"Per-Repo File Override","text":"Field Type Required Description <code>content</code> <code>object/string/array</code> No Content overlay merged onto base <code>override</code> <code>boolean</code> No If true, ignore base content entirely <code>createOnly</code> <code>boolean</code> No Override root-level createOnly <code>executable</code> <code>boolean</code> No Override root-level executable <code>header</code> <code>string/array</code> No Override root-level header <code>schemaUrl</code> <code>string</code> No Override root-level schemaUrl <code>template</code> <code>boolean</code> No Override root-level template <code>vars</code> <code>object</code> No Per-repo template variables <code>deleteOrphaned</code> <code>boolean</code> No Override file-level deleteOrphaned"},{"location":"reference/config-schema/#pr-options","title":"PR Options","text":"Field Type Default Description <code>merge</code> <code>string</code> <code>auto</code> <code>manual</code>, <code>auto</code>, <code>force</code> <code>mergeStrategy</code> <code>string</code> <code>squash</code> <code>merge</code>, <code>squash</code>, <code>rebase</code> <code>deleteBranch</code> <code>boolean</code> <code>true</code> Delete branch after merge <code>bypassReason</code> <code>string</code> - Reason for bypass (Azure DevOps only)"},{"location":"reference/config-schema/#validation","title":"Validation","text":"<p>The schema validates:</p> <ul> <li>Required fields (<code>files</code>, <code>repos</code>, <code>git</code>)</li> <li>Enum values (<code>mergeStrategy</code>, <code>merge</code>, etc.)</li> <li>Content types (object for JSON/YAML, string/array for text files)</li> <li>File path security (no path traversal in file references)</li> </ul>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#basic-usage","title":"Basic Usage","text":"<pre><code># Basic usage\nxfg --config ./config.yaml\n\n# Dry run (no changes made)\nxfg --config ./config.yaml --dry-run\n\n# Custom work directory\nxfg --config ./config.yaml --work-dir ./my-temp\n\n# Custom branch name\nxfg --config ./config.yaml --branch feature/update-eslint\n</code></pre>"},{"location":"usage/#dry-run-mode","title":"Dry-Run Mode","text":"<p>The <code>--dry-run</code> flag lets you preview changes without actually making them. In dry-run mode:</p> <ul> <li>Files are compared but not written</li> <li>Commits and pushes are skipped</li> <li>PRs are not created</li> <li>You can see exactly what would change</li> </ul> <pre><code>xfg --config ./config.yaml --dry-run\n</code></pre>"},{"location":"usage/#cli-options","title":"CLI Options","text":"Option Alias Description Required <code>--config</code> <code>-c</code> Path to YAML config file Yes <code>--dry-run</code> <code>-d</code> Show what would be done without making changes No <code>--work-dir</code> <code>-w</code> Temporary directory for cloning (default: <code>./tmp</code>) No <code>--retries</code> <code>-r</code> Number of retries for network operations (default: 3) No <code>--branch</code> <code>-b</code> Override branch name (default: <code>chore/sync-{filename}</code> or <code>chore/sync-config</code>) No <code>--merge</code> <code>-m</code> PR merge mode: <code>manual</code>, <code>auto</code> (default), <code>force</code> (bypass checks) No <code>--merge-strategy</code> Merge strategy: <code>merge</code>, <code>squash</code> (default), <code>rebase</code> No <code>--delete-branch</code> Delete source branch after merge No"},{"location":"usage/#console-output","title":"Console Output","text":"<pre><code>[1/3] Processing example-org/repo1...\n  \u2713 Cloned repository\n  \u2713 Created branch chore/sync-config\n  \u2713 Wrote .eslintrc.json\n  \u2713 Wrote .prettierrc.yaml\n  \u2713 Committed changes\n  \u2713 Pushed to remote\n  \u2713 Created PR: https://github.com/example-org/repo1/pull/42\n\n[2/3] Processing example-org/repo2...\n  \u2713 Cloned repository\n  \u2713 Checked out existing branch chore/sync-config\n  \u2713 Wrote .eslintrc.json\n  \u2713 Wrote .prettierrc.yaml\n  \u2298 No changes detected, skipping\n\n[3/3] Processing example-org/repo3...\n  \u2713 Cloned repository\n  \u2713 Created branch chore/sync-config\n  \u2713 Wrote .eslintrc.json\n  \u2713 Wrote .prettierrc.yaml\n  \u2713 Committed changes\n  \u2713 Pushed to remote\n  \u2713 PR already exists: https://github.com/example-org/repo3/pull/15\n\nSummary: 2 succeeded, 1 skipped, 0 failed\n</code></pre>"},{"location":"usage/#created-prs","title":"Created PRs","text":"<p>The tool creates PRs with:</p> <ul> <li>Title: <code>chore: sync config files</code> (or lists files if \u22643)</li> <li>Branch: <code>chore/sync-config</code> (or custom <code>--branch</code>)</li> <li>Body: Describes the sync action and lists changed files</li> </ul>"}]}